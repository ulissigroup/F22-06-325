
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Featurizing molecules and materials for chemical engineering &#8212; Numerical Methods and ML for ChE (F22-06-325)</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Neural Networks" href="neural_networks.html" />
    <link rel="prev" title="Non-parametric models" href="nonparametric.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Numerical Methods and ML for ChE (F22-06-325)</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Introduction & License
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Course Info
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../notes.html">
   Logistics/Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../schedule.html">
   Course schedule
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../syllabus.html">
   Syllabus
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../software.html">
   Software Environments
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../helpful_resources.html">
   Helpful Resources
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Course Notes
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="recap.html">
   Recap of Numerical Methods
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="review_odes.html">
     ODE Integration (with Events!)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="ode_events_extra_example.html">
     More complicated example: Van der Pol oscillator
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="review_optimization.html">
     Local Optimization and Curve Fitting
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="intro_ml.html">
   Introduction to Machine Learning
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="ml_basics.html">
     Intro to Supervised Learning
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="overfitting_regularization.html">
     Model Capacity, Overfitting, Regularization, and Ridge/LASSO
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="classification_logistic_regression.html">
     Linear models for classification
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="train_validation.html">
     Validation and Test Splits
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="nonparametric.html">
     Non-parametric models
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Featurizing molecules and materials for chemical engineering
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="neural_networks.html">
     Neural Networks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="dimensionality_reduction_unsupervised.html">
     Unsupervised learning: dimensionality reduction
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../labs/overview.html">
   Labs and Python/Software Tips
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../labs/python_debugging.html">
     <font color="red">
      Python functions, Error handling, Exceptions, Debugging
     </font>
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Assignments
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../projects/overview.html">
   Course Project Overview
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../projects/wildfires/wildfire_dataset.html">
     Predicting Wildfire Smoke Composition
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../projects/catalysts/catalyst_simulation.html">
     Using ML to Predict Catalyst Properties
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../projects/travelling_salesman/travelling_salesman.html">
     Finding optimal tours for the Travelling Salesman Problem
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../homeworks/homework.html">
   Homeworks
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../homeworks/HW1.html">
     HW1 (due noon Monday 9/5)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../homeworks/HW2.html">
     HW2 (due 9/12)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../homeworks/HW3.html">
     HW3 (due 9/26)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../homeworks/HW4.html">
     HW4 (due Monday 10/3 noon) [100 pts]
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../homeworks/HW5.html">
     HW5 (due Monday 10/10 noon)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../homeworks/hw_solutions.html">
     Homework solutions
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/ulissigroup/F22-06-325/main?urlpath=lab/tree/f22-06-325/notes/materials_descriptors.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
      <li>
        <a href="https://laikapack-head.cheme.cmu.edu/hub/hub/user-redirect/git-pull?repo=https%3A//github.com/ulissigroup/F22-06-325&urlpath=lab/tree/F22-06-325/f22-06-325/notes/materials_descriptors.ipynb&branch=main"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on JupyterHub"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_jupyterhub.svg">
  </span>
<span class="headerbtn__text-container">JupyterHub</span>
</a>

      </li>
      
      <li>
        <a href="https://colab.research.google.com/github/ulissigroup/F22-06-325/blob/main/f22-06-325/notes/materials_descriptors.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Colab"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_colab.png">
  </span>
<span class="headerbtn__text-container">Colab</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/ulissigroup/F22-06-325"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ulissigroup/F22-06-325/issues/new?title=Issue%20on%20page%20%2Fnotes/materials_descriptors.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/notes/materials_descriptors.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#demonstration-materials-features-using-matminer">
   Demonstration: Materials features using matminer
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#example-materials-science-dataset-computational-dielectric-properties-of-inorganic-crystals">
   Example materials science dataset (computational dielectric properties of inorganic crystals)
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#loading-the-dielectric-dataset">
     Loading the dielectric dataset
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#recap-of-pandas-manipulating-and-examining-pandas-dataframe-objects">
     (Recap of pandas) Manipulating and examining pandas
     <code class="docutils literal notranslate">
      <span class="pre">
       DataFrame
      </span>
     </code>
     objects
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#indexing-the-dataset">
       Indexing the dataset
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#filtering-the-dataset">
       Filtering the dataset
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#generating-descriptors-for-machine-learning-using-matminer">
   Generating descriptors for machine learning using matminer
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#featurizers-transform-materials-primitives-into-machine-learnable-features">
     Featurizers transform materials primitives into machine-learnable features
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#matminer-contains-featurizers-for-the-following-pymatgen-objects">
       Matminer contains featurizers for the following pymatgen objects:
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#depending-on-the-featurizer-the-features-returned-may-be">
       Depending on the featurizer, the features returned may be:
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#featurizers-play-nice-with-dataframes">
       Featurizers play nice with dataframes
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#featurizers-present-in-matminer">
       Featurizers present in matminer
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-featurize-method-and-basics">
     The
     <code class="docutils literal notranslate">
      <span class="pre">
       featurize
      </span>
     </code>
     method and basics
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#featurizing-dataframes">
     Featurizing  dataframes
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#structure-featurizers">
     Structure Featurizers
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#simple-ml-models-using-our-matminer-features">
   Simple ML models using our matminer features!
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#train-test-split">
     Train/test split
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#features-and-targets">
     Features and targets
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#simple-ridge-regression">
     Simple Ridge regression
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#evaluating-model-performance">
     Evaluating model performance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#visualizing-model-performance">
     Visualizing model performance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#model-interpretation">
     Model interpretation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#bonus-curated-ml-datasets-with-matbench">
   Bonus: Curated ML datasets with Matbench
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-matbench-leaderboard-and-benchmarking-code">
     The Matbench Leaderboard and Benchmarking Code
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#https-hackingmaterials-lbl-gov-matbench">
     https://hackingmaterials.lbl.gov/matbench
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#general-purpose-leaderboard">
     General purpose leaderboard
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Featurizing molecules and materials for chemical engineering</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#demonstration-materials-features-using-matminer">
   Demonstration: Materials features using matminer
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#example-materials-science-dataset-computational-dielectric-properties-of-inorganic-crystals">
   Example materials science dataset (computational dielectric properties of inorganic crystals)
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#loading-the-dielectric-dataset">
     Loading the dielectric dataset
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#recap-of-pandas-manipulating-and-examining-pandas-dataframe-objects">
     (Recap of pandas) Manipulating and examining pandas
     <code class="docutils literal notranslate">
      <span class="pre">
       DataFrame
      </span>
     </code>
     objects
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#indexing-the-dataset">
       Indexing the dataset
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#filtering-the-dataset">
       Filtering the dataset
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#generating-descriptors-for-machine-learning-using-matminer">
   Generating descriptors for machine learning using matminer
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#featurizers-transform-materials-primitives-into-machine-learnable-features">
     Featurizers transform materials primitives into machine-learnable features
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#matminer-contains-featurizers-for-the-following-pymatgen-objects">
       Matminer contains featurizers for the following pymatgen objects:
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#depending-on-the-featurizer-the-features-returned-may-be">
       Depending on the featurizer, the features returned may be:
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#featurizers-play-nice-with-dataframes">
       Featurizers play nice with dataframes
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#featurizers-present-in-matminer">
       Featurizers present in matminer
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-featurize-method-and-basics">
     The
     <code class="docutils literal notranslate">
      <span class="pre">
       featurize
      </span>
     </code>
     method and basics
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#featurizing-dataframes">
     Featurizing  dataframes
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#structure-featurizers">
     Structure Featurizers
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#simple-ml-models-using-our-matminer-features">
   Simple ML models using our matminer features!
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#train-test-split">
     Train/test split
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#features-and-targets">
     Features and targets
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#simple-ridge-regression">
     Simple Ridge regression
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#evaluating-model-performance">
     Evaluating model performance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#visualizing-model-performance">
     Visualizing model performance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#model-interpretation">
     Model interpretation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#bonus-curated-ml-datasets-with-matbench">
   Bonus: Curated ML datasets with Matbench
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-matbench-leaderboard-and-benchmarking-code">
     The Matbench Leaderboard and Benchmarking Code
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#https-hackingmaterials-lbl-gov-matbench">
     https://hackingmaterials.lbl.gov/matbench
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#general-purpose-leaderboard">
     General purpose leaderboard
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <aside class="margin sidebar">
<p class="sidebar-title">Adaptation!</p>
<p>This work was adapted and simplified from one of the Materials Project workshop lessons, available at https://github.com/materialsproject/workshop/, available under the BSD-3-clause license. As such, this notebook is available under the BSD-3-clause license.</p>
</aside>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This lecture is going to:</p>
<ul class="simple">
<li><p>Discuss why and how we can generate descriptors for materials problems</p></li>
<li><p>Introduce several descriptors/features that can be used for:</p>
<ul>
<li><p>chemical compositions</p></li>
<li><p>structure (atomic xyz structure) features</p></li>
<li><p>…</p></li>
</ul>
</li>
<li><p>Demonstrate one package for generating features (<code class="docutils literal notranslate"><span class="pre">matminer</span></code>)</p></li>
<li><p>Fit a simple linear model to a material science dataset</p></li>
</ul>
</div>
<section class="tex2jax_ignore mathjax_ignore" id="featurizing-molecules-and-materials-for-chemical-engineering">
<h1>Featurizing molecules and materials for chemical engineering<a class="headerlink" href="#featurizing-molecules-and-materials-for-chemical-engineering" title="Permalink to this headline">#</a></h1>
<p>We’ve done a lot of work with polynomial features so far, but chemical engineering is full of examples where it’s not clear exactly what the right features are. In this lecture we’ll talk about how to turn data like chemical composition or atomic structures into features that can be used with common machine learning models that expect feature vectors (like our sklearn models).</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://docs.google.com/presentation/d/11cNUIWjqhxwYdVfmkkNXCac-rks7ZkrN9VgiIis6VhQ/edit#slide=id.g9b4bd6acd3_0_6">Google slides on various featurization strategies in molecules, materials, and catalysis!</a></p>
</div>
<section id="demonstration-materials-features-using-matminer">
<h2>Demonstration: Materials features using matminer<a class="headerlink" href="#demonstration-materials-features-using-matminer" title="Permalink to this headline">#</a></h2>
<p>A material science workflow looks very similar to the ones we’ve done so far, but the starting point is different!</p>
<ol class="simple">
<li><p>Take raw inputs, such as a list of compositions, and an associated target property to learn.</p></li>
<li><p>Convert the raw inputs into <em>descriptors</em> or <em>features</em> that can be learned by machine learning algorithms.</p></li>
<li><p>Train a machine learning model on the data.</p></li>
<li><p>Plot and analyze the performance of the model.</p></li>
</ol>
<p><img alt="machine learning workflow" src="../_images/ml_workflow.png" /></p>
<p>There are many python packages available to featurize materials or molecules. The <code class="docutils literal notranslate"><span class="pre">matminer</span></code> package has been developed to help make machine learning of materials properties easy and hassle free. The aim of matminer is to connect materials data with data mining algorithms and data visualization.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Many more tutorials on how to use matminer (beyond the scope of this example) are available in the <code class="docutils literal notranslate"><span class="pre">matminer_examples</span></code> repository, available <a class="reference external" href="https://github.com/hackingmaterials/matminer_examples">here</a>.</p>
</div>
</section>
<section id="example-materials-science-dataset-computational-dielectric-properties-of-inorganic-crystals">
<h2>Example materials science dataset (computational dielectric properties of inorganic crystals)<a class="headerlink" href="#example-materials-science-dataset-computational-dielectric-properties-of-inorganic-crystals" title="Permalink to this headline">#</a></h2>
<p>Matminer interfaces with many materials databases,  including:</p>
<ul class="simple">
<li><p>Materials Project</p></li>
<li><p>Citrine</p></li>
<li><p>AFLOW</p></li>
<li><p>Materials Data Facility (MDF)</p></li>
<li><p>Materials Platform for Data Science (MPDS)</p></li>
</ul>
<p>In addition, it also includes datasets from published literature. Matminer hosts a repository of ~45 datasets which comes from published and peer-reviewed machine learning investigations of materials properties or publications of high-throughput computing studies.</p>
<p>A list of the literature-based datasets can be printed using the <code class="docutils literal notranslate"><span class="pre">get_available_datasets()</span></code> function. This also prints information about what the dataset contains, such as the number of samples, the target properties, and how the data was obtained (e.g., via theory or experiment).</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>More information on accessing other materials databases are detailed in the <a class="reference external" href="https://github.com/hackingmaterials/matminer_examples">matminer_examples</a> repository.</p>
</div>
<section id="loading-the-dielectric-dataset">
<h3>Loading the dielectric dataset<a class="headerlink" href="#loading-the-dielectric-dataset" title="Permalink to this headline">#</a></h3>
<p>All datasets can be loaded using the <code class="docutils literal notranslate"><span class="pre">load_dataset()</span></code> function and the database name. To save installation space, the datasets are not automatically downloaded when matminer is installed. Instead, the first time the dataset is loaded, it will be downloaded from the internet and stored in the matminer installation directory.</p>
<p>Let’s say we’re interested in the <code class="docutils literal notranslate"><span class="pre">dielectric_constant</span></code> dataset,  which contains 1,056 structures with dielectric properties calculated with DFPT-PBE. We can download it with the <code class="docutils literal notranslate"><span class="pre">load_dataset</span></code> function.</p>
<p>We’ll set an environment variable <code class="docutils literal notranslate"><span class="pre">MATMINER_DATA</span></code> which will tell matminer to download all our dataset to a directory <code class="docutils literal notranslate"><span class="pre">./data</span></code>. If you are running this locally, you usually don’t need to set this variable as matminer will download the dataset directly to your matminer source code folder.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the dielectric dataset</span>
<span class="kn">from</span> <span class="nn">matminer.datasets</span> <span class="kn">import</span> <span class="n">load_dataset</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;dielectric_constant&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Fetching dielectric_constant.json.gz from https://ndownloader.figshare.com/files/13213475 to /opt/conda/lib/python3.9/site-packages/matminer/datasets/dielectric_constant.json.gz
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Fetching https://ndownloader.figshare.com/files/13213475 in MB:   0%|          | 0.0/0.885392 [00:00&lt;?, ?MB/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Fetching https://ndownloader.figshare.com/files/13213475 in MB: 0.8867839999999999MB [00:00, 337.27MB/s]      
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">?</span>matmin
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Object `matmin` not found.
</pre></div>
</div>
</div>
</div>
<p>We can get some more detailed information about this dataset using the <code class="docutils literal notranslate"><span class="pre">get_all_dataset_info(&lt;dataset&gt;)</span></code> function from matminer.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">matminer.datasets</span> <span class="kn">import</span> <span class="n">get_all_dataset_info</span>

<span class="nb">print</span><span class="p">(</span><span class="n">get_all_dataset_info</span><span class="p">(</span><span class="s2">&quot;dielectric_constant&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dataset: dielectric_constant
Description: 1,056 structures with dielectric properties, calculated with DFPT-PBE.
Columns:
	band_gap: Measure of the conductivity of a material
	cif: optional: Description string for structure
	e_electronic: electronic contribution to dielectric tensor
	e_total: Total dielectric tensor incorporating both electronic and ionic contributions
	formula: Chemical formula of the material
	material_id: Materials Project ID of the material
	meta: optional, metadata descriptor of the datapoint
	n: Refractive Index
	nsites: The \# of atoms in the unit cell of the calculation.
	poly_electronic: the average of the eigenvalues of the electronic contribution to the dielectric tensor
	poly_total: the average of the eigenvalues of the total (electronic and ionic) contributions to the dielectric tensor
	poscar: optional: Poscar metadata
	pot_ferroelectric: Whether the material is potentially ferroelectric
	space_group: Integer specifying the crystallographic structure of the material
	structure: pandas Series defining the structure of the material
	volume: Volume of the unit cell in cubic angstroms, For supercell calculations, this quantity refers to the volume of the full supercell. 
Num Entries: 1056
Reference: Petousis, I., Mrdjenovich, D., Ballouz, E., Liu, M., Winston, D.,
Chen, W., Graf, T., Schladt, T. D., Persson, K. A. &amp; Prinz, F. B.
High-throughput screening of inorganic compounds for the discovery
of novel dielectric and optical materials. Sci. Data 4, 160134 (2017).
Bibtex citations: [&#39;@Article{Petousis2017,\nauthor={Petousis, Ioannis and Mrdjenovich, David and Ballouz, Eric\nand Liu, Miao and Winston, Donald and Chen, Wei and Graf, Tanja\nand Schladt, Thomas D. and Persson, Kristin A. and Prinz, Fritz B.},\ntitle={High-throughput screening of inorganic compounds for the\ndiscovery of novel dielectric and optical materials},\njournal={Scientific Data},\nyear={2017},\nmonth={Jan},\nday={31},\npublisher={The Author(s)},\nvolume={4},\npages={160134},\nnote={Data Descriptor},\nurl={http://dx.doi.org/10.1038/sdata.2016.134}\n}&#39;]
File type: json.gz
Figshare URL: https://ndownloader.figshare.com/files/13213475
SHA256 Hash Digest: 8eb24812148732786cd7c657eccfc6b5ee66533429c2cfbcc4f0059c0295e8b6
</pre></div>
</div>
</div>
</div>
</section>
<section id="recap-of-pandas-manipulating-and-examining-pandas-dataframe-objects">
<h3>(Recap of pandas) Manipulating and examining pandas <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> objects<a class="headerlink" href="#recap-of-pandas-manipulating-and-examining-pandas-dataframe-objects" title="Permalink to this headline">#</a></h3>
<p>The datasets are made available as pandas <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> objects.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">head()</span></code> function prints a summary of the first few rows of a data set. You can scroll across to see more columns. From this, it is easy to see the types of data available in in the dataset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>material_id</th>
      <th>formula</th>
      <th>nsites</th>
      <th>space_group</th>
      <th>volume</th>
      <th>structure</th>
      <th>band_gap</th>
      <th>e_electronic</th>
      <th>e_total</th>
      <th>n</th>
      <th>poly_electronic</th>
      <th>poly_total</th>
      <th>pot_ferroelectric</th>
      <th>cif</th>
      <th>meta</th>
      <th>poscar</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>mp-441</td>
      <td>Rb2Te</td>
      <td>3</td>
      <td>225</td>
      <td>159.501208</td>
      <td>[[1.75725875 1.2425695  3.04366125] Rb, [5.271...</td>
      <td>1.88</td>
      <td>[[3.44115795, -3.097e-05, -6.276e-05], [-2.837...</td>
      <td>[[6.23414745, -0.00035252, -9.796e-05], [-0.00...</td>
      <td>1.86</td>
      <td>3.44</td>
      <td>6.23</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>Rb2 Te1\n1.0\n5.271776 0.000000 3.043661\n1.75...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>mp-22881</td>
      <td>CdCl2</td>
      <td>3</td>
      <td>166</td>
      <td>84.298097</td>
      <td>[[0. 0. 0.] Cd, [ 4.27210959  2.64061969 13.13...</td>
      <td>3.52</td>
      <td>[[3.34688382, -0.04498543, -0.22379197], [-0.0...</td>
      <td>[[7.97018673, -0.29423886, -1.463590159999999]...</td>
      <td>1.78</td>
      <td>3.16</td>
      <td>6.73</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>Cd1 Cl2\n1.0\n3.850977 0.072671 5.494462\n1.78...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>mp-28013</td>
      <td>MnI2</td>
      <td>3</td>
      <td>164</td>
      <td>108.335875</td>
      <td>[[0. 0. 0.] Mn, [-2.07904300e-06  2.40067320e+...</td>
      <td>1.17</td>
      <td>[[5.5430849, -5.28e-06, -2.5030000000000003e-0...</td>
      <td>[[13.80606079, 0.0006911900000000001, 9.655e-0...</td>
      <td>2.23</td>
      <td>4.97</td>
      <td>10.64</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>Mn1 I2\n1.0\n4.158086 0.000000 0.000000\n-2.07...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>mp-567290</td>
      <td>LaN</td>
      <td>4</td>
      <td>186</td>
      <td>88.162562</td>
      <td>[[-1.73309900e-06  2.38611186e+00  5.95256328e...</td>
      <td>1.12</td>
      <td>[[7.09316738, 7.99e-06, -0.0003864700000000000...</td>
      <td>[[16.79535386, 8.199999999999997e-07, -0.00948...</td>
      <td>2.65</td>
      <td>7.04</td>
      <td>17.99</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>La2 N2\n1.0\n4.132865 0.000000 0.000000\n-2.06...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>mp-560902</td>
      <td>MnF2</td>
      <td>6</td>
      <td>136</td>
      <td>82.826401</td>
      <td>[[1.677294 2.484476 2.484476] Mn, [0. 0. 0.] M...</td>
      <td>2.87</td>
      <td>[[2.4239622, 7.452000000000001e-05, 6.06100000...</td>
      <td>[[6.44055613, 0.0020446600000000002, 0.0013203...</td>
      <td>1.53</td>
      <td>2.35</td>
      <td>7.12</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLDAUTYPE ...</td>
      <td>Mn2 F4\n1.0\n3.354588 0.000000 0.000000\n0.000...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Sometimes, if a dataset is very large, you will be unable to see all the available columns. Instead, you can see the full list of columns using the <code class="docutils literal notranslate"><span class="pre">columns</span></code> attribute:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;material_id&#39;, &#39;formula&#39;, &#39;nsites&#39;, &#39;space_group&#39;, &#39;volume&#39;,
       &#39;structure&#39;, &#39;band_gap&#39;, &#39;e_electronic&#39;, &#39;e_total&#39;, &#39;n&#39;,
       &#39;poly_electronic&#39;, &#39;poly_total&#39;, &#39;pot_ferroelectric&#39;, &#39;cif&#39;, &#39;meta&#39;,
       &#39;poscar&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<p>A pandas <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> includes a function called <code class="docutils literal notranslate"><span class="pre">describe()</span></code> that helps determine statistics for the various numerical/categorical columns in the data. Note that the <code class="docutils literal notranslate"><span class="pre">describe()</span></code> function only describes numerical columns by default.</p>
<p>Sometimes, the <code class="docutils literal notranslate"><span class="pre">describe()</span></code> function will reveal outliers that indicate mistakes in the data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>nsites</th>
      <th>space_group</th>
      <th>volume</th>
      <th>band_gap</th>
      <th>n</th>
      <th>poly_electronic</th>
      <th>poly_total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>1056.000000</td>
      <td>1056.000000</td>
      <td>1056.000000</td>
      <td>1056.000000</td>
      <td>1056.000000</td>
      <td>1056.000000</td>
      <td>1056.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>7.530303</td>
      <td>142.970644</td>
      <td>166.420376</td>
      <td>2.119432</td>
      <td>2.434886</td>
      <td>7.248049</td>
      <td>14.777898</td>
    </tr>
    <tr>
      <th>std</th>
      <td>3.388443</td>
      <td>67.264591</td>
      <td>97.425084</td>
      <td>1.604924</td>
      <td>1.148849</td>
      <td>13.054947</td>
      <td>19.435303</td>
    </tr>
    <tr>
      <th>min</th>
      <td>2.000000</td>
      <td>1.000000</td>
      <td>13.980548</td>
      <td>0.110000</td>
      <td>1.280000</td>
      <td>1.630000</td>
      <td>2.080000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>5.000000</td>
      <td>82.000000</td>
      <td>96.262337</td>
      <td>0.890000</td>
      <td>1.770000</td>
      <td>3.130000</td>
      <td>7.557500</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>8.000000</td>
      <td>163.000000</td>
      <td>145.944691</td>
      <td>1.730000</td>
      <td>2.190000</td>
      <td>4.790000</td>
      <td>10.540000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>9.000000</td>
      <td>194.000000</td>
      <td>212.106405</td>
      <td>2.885000</td>
      <td>2.730000</td>
      <td>7.440000</td>
      <td>15.482500</td>
    </tr>
    <tr>
      <th>max</th>
      <td>20.000000</td>
      <td>229.000000</td>
      <td>597.341134</td>
      <td>8.320000</td>
      <td>16.030000</td>
      <td>256.840000</td>
      <td>277.780000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<section id="indexing-the-dataset">
<h4>Indexing the dataset<a class="headerlink" href="#indexing-the-dataset" title="Permalink to this headline">#</a></h4>
<p>We can access a particular column of <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> by indexing the object using the column name. For example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;band_gap&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0       1.88
1       3.52
2       1.17
3       1.12
4       2.87
        ... 
1051    0.87
1052    3.60
1053    0.14
1054    0.21
1055    0.26
Name: band_gap, Length: 1056, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>You can also access multiple columns by indexing with a list of column names rather than a single column name:</p>
<p>Alternatively, we can access a particular row of a <code class="docutils literal notranslate"><span class="pre">Dataframe</span></code> using the <code class="docutils literal notranslate"><span class="pre">iloc</span></code> attribute.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>material_id                                                    mp-7140
formula                                                            SiC
nsites                                                               4
space_group                                                        186
volume                                                       42.005504
structure            [[-1.87933700e-06  1.78517223e+00  2.53458835e...
band_gap                                                           2.3
e_electronic         [[6.9589498, -3.29e-06, 0.0014472600000000001]...
e_total              [[10.193825310000001, -3.7090000000000006e-05,...
n                                                                 2.66
poly_electronic                                                   7.08
poly_total                                                       10.58
pot_ferroelectric                                                False
cif                  #\#CIF1.1\n###################################...
meta                 {u&#39;incar&#39;: u&#39;NELM = 100\nIBRION = 8\nLWAVE = F...
poscar               Si2 C2\n1.0\n3.092007 0.000000 0.000000\n-1.54...
Name: 100, dtype: object
</pre></div>
</div>
</div>
</div>
</section>
<section id="filtering-the-dataset">
<h4>Filtering the dataset<a class="headerlink" href="#filtering-the-dataset" title="Permalink to this headline">#</a></h4>
<p>Pandas <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> objects make it very easy to filter the data based on a specific column. We can use the typical Python comparison operators (==, &gt;, &gt;=, &lt;, etc) to filter numerical values. For example, let’s find all entries where the cell volume is greater than 580. We do this by filtering on the <code class="docutils literal notranslate"><span class="pre">volume</span></code> column.</p>
<p>Note that we first produce a <em>boolean mask</em> – a series of <code class="docutils literal notranslate"><span class="pre">True</span></code> and <code class="docutils literal notranslate"><span class="pre">False</span></code> depending on the comparison. We can then use the mask to filter the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mask</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">580</span>
<span class="n">df</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>material_id</th>
      <th>formula</th>
      <th>nsites</th>
      <th>space_group</th>
      <th>volume</th>
      <th>structure</th>
      <th>band_gap</th>
      <th>e_electronic</th>
      <th>e_total</th>
      <th>n</th>
      <th>poly_electronic</th>
      <th>poly_total</th>
      <th>pot_ferroelectric</th>
      <th>cif</th>
      <th>meta</th>
      <th>poscar</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>206</th>
      <td>mp-23280</td>
      <td>AsCl3</td>
      <td>16</td>
      <td>19</td>
      <td>582.085309</td>
      <td>[[0.13113333 7.14863883 9.63476955] As, [2.457...</td>
      <td>3.99</td>
      <td>[[2.2839161900000002, 0.00014519, -2.238000000...</td>
      <td>[[2.49739759, 0.00069379, 0.00075864], [0.0004...</td>
      <td>1.57</td>
      <td>2.47</td>
      <td>3.30</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>As4 Cl12\n1.0\n4.652758 0.000000 0.000000\n0.0...</td>
    </tr>
    <tr>
      <th>216</th>
      <td>mp-9064</td>
      <td>RbTe</td>
      <td>12</td>
      <td>189</td>
      <td>590.136085</td>
      <td>[[6.61780282 0.         0.        ] Rb, [1.750...</td>
      <td>0.43</td>
      <td>[[3.25648277, 5.9650000000000007e-05, 1.57e-06...</td>
      <td>[[5.34517928, 0.00022474000000000002, -0.00018...</td>
      <td>2.05</td>
      <td>4.20</td>
      <td>6.77</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>Rb6 Te6\n1.0\n10.118717 0.000000 0.000000\n-5....</td>
    </tr>
    <tr>
      <th>219</th>
      <td>mp-23230</td>
      <td>PCl3</td>
      <td>16</td>
      <td>62</td>
      <td>590.637274</td>
      <td>[[6.02561815 8.74038483 7.55586375] P, [2.7640...</td>
      <td>4.03</td>
      <td>[[2.39067769, 0.00017593, 8.931000000000001e-0...</td>
      <td>[[2.80467218, 0.00034093000000000003, 0.000692...</td>
      <td>1.52</td>
      <td>2.31</td>
      <td>2.76</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>P4 Cl12\n1.0\n6.523152 0.000000 0.000000\n0.00...</td>
    </tr>
    <tr>
      <th>251</th>
      <td>mp-2160</td>
      <td>Sb2Se3</td>
      <td>20</td>
      <td>62</td>
      <td>597.341134</td>
      <td>[[3.02245275 0.42059268 1.7670481 ] Sb, [ 1.00...</td>
      <td>0.76</td>
      <td>[[19.1521058, 5.5e-06, 0.00025268], [-1.078000...</td>
      <td>[[81.93819038000001, 0.0006755800000000001, 0....</td>
      <td>3.97</td>
      <td>15.76</td>
      <td>63.53</td>
      <td>True</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>Sb8 Se12\n1.0\n4.029937 0.000000 0.000000\n0.0...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We can use this method of filtering to clean our dataset. For example, if we only wanted our dataset to only include nonmetals (materials with a non-zero band gap), we can do this easily by filtering the <code class="docutils literal notranslate"><span class="pre">band_gap</span></code> column.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mask</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;band_gap&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="n">nonmetal_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
<span class="n">nonmetal_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>material_id</th>
      <th>formula</th>
      <th>nsites</th>
      <th>space_group</th>
      <th>volume</th>
      <th>structure</th>
      <th>band_gap</th>
      <th>e_electronic</th>
      <th>e_total</th>
      <th>n</th>
      <th>poly_electronic</th>
      <th>poly_total</th>
      <th>pot_ferroelectric</th>
      <th>cif</th>
      <th>meta</th>
      <th>poscar</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>mp-441</td>
      <td>Rb2Te</td>
      <td>3</td>
      <td>225</td>
      <td>159.501208</td>
      <td>[[1.75725875 1.2425695  3.04366125] Rb, [5.271...</td>
      <td>1.88</td>
      <td>[[3.44115795, -3.097e-05, -6.276e-05], [-2.837...</td>
      <td>[[6.23414745, -0.00035252, -9.796e-05], [-0.00...</td>
      <td>1.86</td>
      <td>3.44</td>
      <td>6.23</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>Rb2 Te1\n1.0\n5.271776 0.000000 3.043661\n1.75...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>mp-22881</td>
      <td>CdCl2</td>
      <td>3</td>
      <td>166</td>
      <td>84.298097</td>
      <td>[[0. 0. 0.] Cd, [ 4.27210959  2.64061969 13.13...</td>
      <td>3.52</td>
      <td>[[3.34688382, -0.04498543, -0.22379197], [-0.0...</td>
      <td>[[7.97018673, -0.29423886, -1.463590159999999]...</td>
      <td>1.78</td>
      <td>3.16</td>
      <td>6.73</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>Cd1 Cl2\n1.0\n3.850977 0.072671 5.494462\n1.78...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>mp-28013</td>
      <td>MnI2</td>
      <td>3</td>
      <td>164</td>
      <td>108.335875</td>
      <td>[[0. 0. 0.] Mn, [-2.07904300e-06  2.40067320e+...</td>
      <td>1.17</td>
      <td>[[5.5430849, -5.28e-06, -2.5030000000000003e-0...</td>
      <td>[[13.80606079, 0.0006911900000000001, 9.655e-0...</td>
      <td>2.23</td>
      <td>4.97</td>
      <td>10.64</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>Mn1 I2\n1.0\n4.158086 0.000000 0.000000\n-2.07...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>mp-567290</td>
      <td>LaN</td>
      <td>4</td>
      <td>186</td>
      <td>88.162562</td>
      <td>[[-1.73309900e-06  2.38611186e+00  5.95256328e...</td>
      <td>1.12</td>
      <td>[[7.09316738, 7.99e-06, -0.0003864700000000000...</td>
      <td>[[16.79535386, 8.199999999999997e-07, -0.00948...</td>
      <td>2.65</td>
      <td>7.04</td>
      <td>17.99</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>La2 N2\n1.0\n4.132865 0.000000 0.000000\n-2.06...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>mp-560902</td>
      <td>MnF2</td>
      <td>6</td>
      <td>136</td>
      <td>82.826401</td>
      <td>[[1.677294 2.484476 2.484476] Mn, [0. 0. 0.] M...</td>
      <td>2.87</td>
      <td>[[2.4239622, 7.452000000000001e-05, 6.06100000...</td>
      <td>[[6.44055613, 0.0020446600000000002, 0.0013203...</td>
      <td>1.53</td>
      <td>2.35</td>
      <td>7.12</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLDAUTYPE ...</td>
      <td>Mn2 F4\n1.0\n3.354588 0.000000 0.000000\n0.000...</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1051</th>
      <td>mp-568032</td>
      <td>Cd(InSe2)2</td>
      <td>7</td>
      <td>111</td>
      <td>212.493121</td>
      <td>[[0. 0. 0.] Cd, [2.9560375 0.        3.03973  ...</td>
      <td>0.87</td>
      <td>[[7.74896783, 0.0, 0.0], [0.0, 7.74896783, 0.0...</td>
      <td>[[11.85159471, 1e-08, 0.0], [1e-08, 11.8515962...</td>
      <td>2.77</td>
      <td>7.67</td>
      <td>11.76</td>
      <td>True</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>Cd1 In2 Se4\n1.0\n5.912075 0.000000 0.000000\n...</td>
    </tr>
    <tr>
      <th>1052</th>
      <td>mp-696944</td>
      <td>LaHBr2</td>
      <td>8</td>
      <td>194</td>
      <td>220.041363</td>
      <td>[[2.068917   3.58317965 3.70992025] La, [4.400...</td>
      <td>3.60</td>
      <td>[[4.40504391, 6.1e-07, 0.0], [6.1e-07, 4.40501...</td>
      <td>[[8.77136355, 1.649999999999999e-06, 0.0], [1....</td>
      <td>2.00</td>
      <td>3.99</td>
      <td>7.08</td>
      <td>True</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>La2 H2 Br4\n1.0\n4.137833 0.000000 0.000000\n-...</td>
    </tr>
    <tr>
      <th>1053</th>
      <td>mp-16238</td>
      <td>Li2AgSb</td>
      <td>4</td>
      <td>216</td>
      <td>73.882306</td>
      <td>[[1.35965225 0.96141925 2.354987  ] Li, [2.719...</td>
      <td>0.14</td>
      <td>[[212.60750153, -1.843e-05, 0.0], [-1.843e-05,...</td>
      <td>[[232.59707383, -0.0005407400000000001, 0.0025...</td>
      <td>14.58</td>
      <td>212.61</td>
      <td>232.60</td>
      <td>True</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>Li2 Ag1 Sb1\n1.0\n4.078957 0.000000 2.354987\n...</td>
    </tr>
    <tr>
      <th>1054</th>
      <td>mp-4405</td>
      <td>Rb3AuO</td>
      <td>5</td>
      <td>221</td>
      <td>177.269065</td>
      <td>[[0.       2.808758 2.808758] Rb, [2.808758 2....</td>
      <td>0.21</td>
      <td>[[6.40511712, 0.0, 0.0], [0.0, 6.40511712, 0.0...</td>
      <td>[[22.43799785, 0.0, 0.0], [0.0, 22.4380185, 0....</td>
      <td>2.53</td>
      <td>6.41</td>
      <td>22.44</td>
      <td>True</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>Rb3 Au1 O1\n1.0\n5.617516 0.000000 0.000000\n0...</td>
    </tr>
    <tr>
      <th>1055</th>
      <td>mp-3486</td>
      <td>KSnSb</td>
      <td>6</td>
      <td>186</td>
      <td>227.725015</td>
      <td>[[-1.89006800e-06  2.56736395e+00  1.32914373e...</td>
      <td>0.26</td>
      <td>[[13.85634957, 1.8e-06, 0.0], [1.8e-06, 13.856...</td>
      <td>[[16.45311887, 1.64e-06, -0.00019139], [1.64e-...</td>
      <td>3.53</td>
      <td>12.47</td>
      <td>15.55</td>
      <td>True</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>K2 Sn2 Sb2\n1.0\n4.446803 0.000000 0.000000\n-...</td>
    </tr>
  </tbody>
</table>
<p>1056 rows × 16 columns</p>
</div></div></div>
</div>
<p>Often, a dataset contains many additional columns that are not necessary for machine learning. Before we can train a model on the data, we need to remove any extraneous columns. We can remove whole columns from the dataset using the <code class="docutils literal notranslate"><span class="pre">drop()</span></code> function. This function can be used to drop both rows and columns.</p>
<p>The function takes a list of items to drop. For columns, this is column names whereas for rows it is the row number. Finally, the <code class="docutils literal notranslate"><span class="pre">axis</span></code> option specifies whether the data to drop is columns (<code class="docutils literal notranslate"><span class="pre">1</span></code>) or rows (<code class="docutils literal notranslate"><span class="pre">0</span></code>).</p>
<p>For example, to remove the <code class="docutils literal notranslate"><span class="pre">nsites</span></code>, <code class="docutils literal notranslate"><span class="pre">space_group</span></code>, <code class="docutils literal notranslate"><span class="pre">e_electronic</span></code>, and <code class="docutils literal notranslate"><span class="pre">e_total</span></code> columns, we can run:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cleaned_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s2">&quot;nsites&quot;</span><span class="p">,</span> <span class="s2">&quot;space_group&quot;</span><span class="p">,</span> <span class="s2">&quot;e_electronic&quot;</span><span class="p">,</span> <span class="s2">&quot;e_total&quot;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s examine the cleaned <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> to see that the columns have been removed.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cleaned_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>material_id</th>
      <th>formula</th>
      <th>volume</th>
      <th>structure</th>
      <th>band_gap</th>
      <th>n</th>
      <th>poly_electronic</th>
      <th>poly_total</th>
      <th>pot_ferroelectric</th>
      <th>cif</th>
      <th>meta</th>
      <th>poscar</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>mp-441</td>
      <td>Rb2Te</td>
      <td>159.501208</td>
      <td>[[1.75725875 1.2425695  3.04366125] Rb, [5.271...</td>
      <td>1.88</td>
      <td>1.86</td>
      <td>3.44</td>
      <td>6.23</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>Rb2 Te1\n1.0\n5.271776 0.000000 3.043661\n1.75...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>mp-22881</td>
      <td>CdCl2</td>
      <td>84.298097</td>
      <td>[[0. 0. 0.] Cd, [ 4.27210959  2.64061969 13.13...</td>
      <td>3.52</td>
      <td>1.78</td>
      <td>3.16</td>
      <td>6.73</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>Cd1 Cl2\n1.0\n3.850977 0.072671 5.494462\n1.78...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>mp-28013</td>
      <td>MnI2</td>
      <td>108.335875</td>
      <td>[[0. 0. 0.] Mn, [-2.07904300e-06  2.40067320e+...</td>
      <td>1.17</td>
      <td>2.23</td>
      <td>4.97</td>
      <td>10.64</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>Mn1 I2\n1.0\n4.158086 0.000000 0.000000\n-2.07...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>mp-567290</td>
      <td>LaN</td>
      <td>88.162562</td>
      <td>[[-1.73309900e-06  2.38611186e+00  5.95256328e...</td>
      <td>1.12</td>
      <td>2.65</td>
      <td>7.04</td>
      <td>17.99</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>La2 N2\n1.0\n4.132865 0.000000 0.000000\n-2.06...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>mp-560902</td>
      <td>MnF2</td>
      <td>82.826401</td>
      <td>[[1.677294 2.484476 2.484476] Mn, [0. 0. 0.] M...</td>
      <td>2.87</td>
      <td>1.53</td>
      <td>2.35</td>
      <td>7.12</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLDAUTYPE ...</td>
      <td>Mn2 F4\n1.0\n3.354588 0.000000 0.000000\n0.000...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>You can alternatively <em>select</em> multiple columns by passing in a list of column names as an index.</p>
<p>For example, if we’re only interested in the <code class="docutils literal notranslate"><span class="pre">band_gap</span></code> and <code class="docutils literal notranslate"><span class="pre">structure</span></code> columns, we can index with <code class="docutils literal notranslate"><span class="pre">[&quot;band_gap&quot;,</span> <span class="pre">&quot;structure&quot;]</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[[</span><span class="s2">&quot;band_gap&quot;</span><span class="p">,</span> <span class="s2">&quot;structure&quot;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>band_gap</th>
      <th>structure</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1.88</td>
      <td>[[1.75725875 1.2425695  3.04366125] Rb, [5.271...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3.52</td>
      <td>[[0. 0. 0.] Cd, [ 4.27210959  2.64061969 13.13...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1.17</td>
      <td>[[0. 0. 0.] Mn, [-2.07904300e-06  2.40067320e+...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1.12</td>
      <td>[[-1.73309900e-06  2.38611186e+00  5.95256328e...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2.87</td>
      <td>[[1.677294 2.484476 2.484476] Mn, [0. 0. 0.] M...</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1051</th>
      <td>0.87</td>
      <td>[[0. 0. 0.] Cd, [2.9560375 0.        3.03973  ...</td>
    </tr>
    <tr>
      <th>1052</th>
      <td>3.60</td>
      <td>[[2.068917   3.58317965 3.70992025] La, [4.400...</td>
    </tr>
    <tr>
      <th>1053</th>
      <td>0.14</td>
      <td>[[1.35965225 0.96141925 2.354987  ] Li, [2.719...</td>
    </tr>
    <tr>
      <th>1054</th>
      <td>0.21</td>
      <td>[[0.       2.808758 2.808758] Rb, [2.808758 2....</td>
    </tr>
    <tr>
      <th>1055</th>
      <td>0.26</td>
      <td>[[-1.89006800e-06  2.56736395e+00  1.32914373e...</td>
    </tr>
  </tbody>
</table>
<p>1056 rows × 2 columns</p>
</div></div></div>
</div>
</section>
</section>
</section>
<section id="generating-descriptors-for-machine-learning-using-matminer">
<h2>Generating descriptors for machine learning using matminer<a class="headerlink" href="#generating-descriptors-for-machine-learning-using-matminer" title="Permalink to this headline">#</a></h2>
<p>In this section, we will learn a bit about how to generate machine-learning descriptors from materials objects in pymatgen. First, we’ll generate some descriptors with matminer’s “featurizers” classes. Next, we’ll use some of what we learned about dataframes in the previous section to examine our descriptors and prepare them for input to machine learning models.</p>
<p><img alt="featurizers_overview.png" src="../_images/featurizers_overview.png" /></p>
<section id="featurizers-transform-materials-primitives-into-machine-learnable-features">
<h3>Featurizers transform materials primitives into machine-learnable features<a class="headerlink" href="#featurizers-transform-materials-primitives-into-machine-learnable-features" title="Permalink to this headline">#</a></h3>
<p>The general idea of featurizers is that they accept a materials primitive (e.g., pymatgen Composition) and output a vector. For example:</p>
<div class="amsmath math notranslate nohighlight" id="equation-cb94c9c9-4d59-4191-9bc5-5ed4f7a12c55">
<span class="eqno">(5)<a class="headerlink" href="#equation-cb94c9c9-4d59-4191-9bc5-5ed4f7a12c55" title="Permalink to this equation">#</a></span>\[\begin{align}
f(\mathrm{Fe}_2\mathrm{O}_3) \rightarrow [1.5, 7.8, 9.1, 0.09]
\end{align}\]</div>
<section id="matminer-contains-featurizers-for-the-following-pymatgen-objects">
<h4>Matminer contains featurizers for the following pymatgen objects:<a class="headerlink" href="#matminer-contains-featurizers-for-the-following-pymatgen-objects" title="Permalink to this headline">#</a></h4>
<ul class="simple">
<li><p>Composition</p></li>
<li><p>Crystal structure</p></li>
<li><p>Crystal sites</p></li>
<li><p>Bandstructure</p></li>
<li><p>Density of states</p></li>
</ul>
</section>
<section id="depending-on-the-featurizer-the-features-returned-may-be">
<h4>Depending on the featurizer, the features returned may be:<a class="headerlink" href="#depending-on-the-featurizer-the-features-returned-may-be" title="Permalink to this headline">#</a></h4>
<ul class="simple">
<li><p>numerical, categorical, or mixed vectors</p></li>
<li><p>matrices</p></li>
<li><p>other pymatgen objects (for further processing)</p></li>
</ul>
</section>
<section id="featurizers-play-nice-with-dataframes">
<h4>Featurizers play nice with dataframes<a class="headerlink" href="#featurizers-play-nice-with-dataframes" title="Permalink to this headline">#</a></h4>
<p>Since most of the time we are working with pandas dataframes, all featurizers work natively with pandas dataframes. We’ll provide examples of this later in the lesson</p>
<p>In this lesson, we’ll go over the main methods present in all featurizers. By the end of this unit, you will be able to generate descriptors for a wide range of materials informatics problems using one common software interface.</p>
</section>
<section id="featurizers-present-in-matminer">
<h4>Featurizers present in matminer<a class="headerlink" href="#featurizers-present-in-matminer" title="Permalink to this headline">#</a></h4>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Matminer hosts over 60 featurizers, most of which are implemented from methods published in peer reviewed papers. You can find a full list of featurizers on the <a class="reference external" href="https://hackingmaterials.lbl.gov/matminer/featurizer_summary.html">matminer website</a>. All featurizers have parallelization and convenient error tolerance built into their core methods.</p>
</div>
</section>
</section>
<section id="the-featurize-method-and-basics">
<h3>The <code class="docutils literal notranslate"><span class="pre">featurize</span></code> method and basics<a class="headerlink" href="#the-featurize-method-and-basics" title="Permalink to this headline">#</a></h3>
<p>The core method of any matminer is “featurize”. This method accepts a materials object and returns a machine learning vector or matrix. Let’s see an example on a pymatgen composition:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pymatgen.core</span> <span class="kn">import</span> <span class="n">Composition</span>

<span class="n">fe2o3</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span><span class="s2">&quot;Fe2O3&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fe2o3</span><span class="o">.</span><span class="n">fractional_composition</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Comp: Fe0.4 O0.6
</pre></div>
</div>
</div>
</div>
<p>As a trivial example, we’ll get the element fractions with the <code class="docutils literal notranslate"><span class="pre">ElementFraction</span></code> featurizer.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">matminer.featurizers.composition.element</span> <span class="kn">import</span> <span class="n">ElementFraction</span>

<span class="n">ef</span> <span class="o">=</span> <span class="n">ElementFraction</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Now we can featurize our composition.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">element_fractions</span> <span class="o">=</span> <span class="n">ef</span><span class="o">.</span><span class="n">featurize</span><span class="p">(</span><span class="n">fe2o3</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">element_fractions</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0, 0, 0, 0, 0, 0, 0, 0.6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
</pre></div>
</div>
</div>
</div>
<p>We’ve managed to generate features for learning, but what do they mean? One way to check is by reading the <code class="docutils literal notranslate"><span class="pre">Features</span></code> section in the documentation of any featurizer… but a much easier way is to use the <code class="docutils literal notranslate"><span class="pre">feature_labels()</span></code> method.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">element_fraction_labels</span> <span class="o">=</span> <span class="n">ef</span><span class="o">.</span><span class="n">feature_labels</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">element_fraction_labels</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;H&#39;, &#39;He&#39;, &#39;Li&#39;, &#39;Be&#39;, &#39;B&#39;, &#39;C&#39;, &#39;N&#39;, &#39;O&#39;, &#39;F&#39;, &#39;Ne&#39;, &#39;Na&#39;, &#39;Mg&#39;, &#39;Al&#39;, &#39;Si&#39;, &#39;P&#39;, &#39;S&#39;, &#39;Cl&#39;, &#39;Ar&#39;, &#39;K&#39;, &#39;Ca&#39;, &#39;Sc&#39;, &#39;Ti&#39;, &#39;V&#39;, &#39;Cr&#39;, &#39;Mn&#39;, &#39;Fe&#39;, &#39;Co&#39;, &#39;Ni&#39;, &#39;Cu&#39;, &#39;Zn&#39;, &#39;Ga&#39;, &#39;Ge&#39;, &#39;As&#39;, &#39;Se&#39;, &#39;Br&#39;, &#39;Kr&#39;, &#39;Rb&#39;, &#39;Sr&#39;, &#39;Y&#39;, &#39;Zr&#39;, &#39;Nb&#39;, &#39;Mo&#39;, &#39;Tc&#39;, &#39;Ru&#39;, &#39;Rh&#39;, &#39;Pd&#39;, &#39;Ag&#39;, &#39;Cd&#39;, &#39;In&#39;, &#39;Sn&#39;, &#39;Sb&#39;, &#39;Te&#39;, &#39;I&#39;, &#39;Xe&#39;, &#39;Cs&#39;, &#39;Ba&#39;, &#39;La&#39;, &#39;Ce&#39;, &#39;Pr&#39;, &#39;Nd&#39;, &#39;Pm&#39;, &#39;Sm&#39;, &#39;Eu&#39;, &#39;Gd&#39;, &#39;Tb&#39;, &#39;Dy&#39;, &#39;Ho&#39;, &#39;Er&#39;, &#39;Tm&#39;, &#39;Yb&#39;, &#39;Lu&#39;, &#39;Hf&#39;, &#39;Ta&#39;, &#39;W&#39;, &#39;Re&#39;, &#39;Os&#39;, &#39;Ir&#39;, &#39;Pt&#39;, &#39;Au&#39;, &#39;Hg&#39;, &#39;Tl&#39;, &#39;Pb&#39;, &#39;Bi&#39;, &#39;Po&#39;, &#39;At&#39;, &#39;Rn&#39;, &#39;Fr&#39;, &#39;Ra&#39;, &#39;Ac&#39;, &#39;Th&#39;, &#39;Pa&#39;, &#39;U&#39;, &#39;Np&#39;, &#39;Pu&#39;, &#39;Am&#39;, &#39;Cm&#39;, &#39;Bk&#39;, &#39;Cf&#39;, &#39;Es&#39;, &#39;Fm&#39;, &#39;Md&#39;, &#39;No&#39;, &#39;Lr&#39;]
</pre></div>
</div>
</div>
</div>
<p>We now see the labels in the order that we generated the features.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">element_fraction_labels</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span> <span class="n">element_fractions</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">element_fraction_labels</span><span class="p">[</span><span class="mi">25</span><span class="p">],</span> <span class="n">element_fractions</span><span class="p">[</span><span class="mi">25</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>O 0.6
Fe 0.4
</pre></div>
</div>
</div>
</div>
</section>
<section id="featurizing-dataframes">
<h3>Featurizing  dataframes<a class="headerlink" href="#featurizing-dataframes" title="Permalink to this headline">#</a></h3>
<p>We just generated some descriptors and their labels from an individual sample but most of the time our data is in pandas dataframes. Fortunately, matminer featurizers implement a <code class="docutils literal notranslate"><span class="pre">featurize_dataframe()</span></code> method which interacts natively with dataframes.</p>
<p>Let’s grab a new dataset from matminer and use our <code class="docutils literal notranslate"><span class="pre">ElementFraction</span></code> featurizer on it.</p>
<p>First, we download a dataset as we did in the previous unit. In this example, we’ll download a dataset of super hard materials.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">matminer.datasets.dataset_retrieval</span> <span class="kn">import</span> <span class="n">load_dataset</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;dielectric_constant&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>material_id</th>
      <th>formula</th>
      <th>nsites</th>
      <th>space_group</th>
      <th>volume</th>
      <th>structure</th>
      <th>band_gap</th>
      <th>e_electronic</th>
      <th>e_total</th>
      <th>n</th>
      <th>poly_electronic</th>
      <th>poly_total</th>
      <th>pot_ferroelectric</th>
      <th>cif</th>
      <th>meta</th>
      <th>poscar</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>mp-441</td>
      <td>Rb2Te</td>
      <td>3</td>
      <td>225</td>
      <td>159.501208</td>
      <td>[[1.75725875 1.2425695  3.04366125] Rb, [5.271...</td>
      <td>1.88</td>
      <td>[[3.44115795, -3.097e-05, -6.276e-05], [-2.837...</td>
      <td>[[6.23414745, -0.00035252, -9.796e-05], [-0.00...</td>
      <td>1.86</td>
      <td>3.44</td>
      <td>6.23</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>Rb2 Te1\n1.0\n5.271776 0.000000 3.043661\n1.75...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>mp-22881</td>
      <td>CdCl2</td>
      <td>3</td>
      <td>166</td>
      <td>84.298097</td>
      <td>[[0. 0. 0.] Cd, [ 4.27210959  2.64061969 13.13...</td>
      <td>3.52</td>
      <td>[[3.34688382, -0.04498543, -0.22379197], [-0.0...</td>
      <td>[[7.97018673, -0.29423886, -1.463590159999999]...</td>
      <td>1.78</td>
      <td>3.16</td>
      <td>6.73</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>Cd1 Cl2\n1.0\n3.850977 0.072671 5.494462\n1.78...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>mp-28013</td>
      <td>MnI2</td>
      <td>3</td>
      <td>164</td>
      <td>108.335875</td>
      <td>[[0. 0. 0.] Mn, [-2.07904300e-06  2.40067320e+...</td>
      <td>1.17</td>
      <td>[[5.5430849, -5.28e-06, -2.5030000000000003e-0...</td>
      <td>[[13.80606079, 0.0006911900000000001, 9.655e-0...</td>
      <td>2.23</td>
      <td>4.97</td>
      <td>10.64</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>Mn1 I2\n1.0\n4.158086 0.000000 0.000000\n-2.07...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>mp-567290</td>
      <td>LaN</td>
      <td>4</td>
      <td>186</td>
      <td>88.162562</td>
      <td>[[-1.73309900e-06  2.38611186e+00  5.95256328e...</td>
      <td>1.12</td>
      <td>[[7.09316738, 7.99e-06, -0.0003864700000000000...</td>
      <td>[[16.79535386, 8.199999999999997e-07, -0.00948...</td>
      <td>2.65</td>
      <td>7.04</td>
      <td>17.99</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>La2 N2\n1.0\n4.132865 0.000000 0.000000\n-2.06...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>mp-560902</td>
      <td>MnF2</td>
      <td>6</td>
      <td>136</td>
      <td>82.826401</td>
      <td>[[1.677294 2.484476 2.484476] Mn, [0. 0. 0.] M...</td>
      <td>2.87</td>
      <td>[[2.4239622, 7.452000000000001e-05, 6.06100000...</td>
      <td>[[6.44055613, 0.0020446600000000002, 0.0013203...</td>
      <td>1.53</td>
      <td>2.35</td>
      <td>7.12</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLDAUTYPE ...</td>
      <td>Mn2 F4\n1.0\n3.354588 0.000000 0.000000\n0.000...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The dataset we loaded previously only contains a <code class="docutils literal notranslate"><span class="pre">formula</span></code> column with string objects. To convert this data into a composition column containing pymatgen Composition objects, we can use the <code class="docutils literal notranslate"><span class="pre">StrToComposition</span></code> conversion featurizer on the <code class="docutils literal notranslate"><span class="pre">formula</span></code> column.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">matminer.featurizers.conversions</span> <span class="kn">import</span> <span class="n">StrToComposition</span>

<span class="n">stc</span> <span class="o">=</span> <span class="n">StrToComposition</span><span class="p">()</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">stc</span><span class="o">.</span><span class="n">featurize_dataframe</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;formula&quot;</span><span class="p">,</span> <span class="n">pbar</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Next, we can use the <code class="docutils literal notranslate"><span class="pre">featurize_dataframe()</span></code> method (implemented by all featurizers) to apply ElementFraction to all of our data at once. The only required arguments are the dataframe as input and the input column name (in this case it is <code class="docutils literal notranslate"><span class="pre">composition</span></code>). <code class="docutils literal notranslate"><span class="pre">featurize_dataframe()</span></code> is parallelized by default using multiprocessing.</p>
<p>If we look at the dataframe, now we can see our new feature columns.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">ef</span><span class="o">.</span><span class="n">featurize_dataframe</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;composition&quot;</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"version_major": 2, "version_minor": 0, "model_id": "5636cf7e6fdd4a23924930114ce70d06"}
</script><div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>material_id</th>
      <th>formula</th>
      <th>nsites</th>
      <th>space_group</th>
      <th>volume</th>
      <th>structure</th>
      <th>band_gap</th>
      <th>e_electronic</th>
      <th>e_total</th>
      <th>n</th>
      <th>...</th>
      <th>Pu</th>
      <th>Am</th>
      <th>Cm</th>
      <th>Bk</th>
      <th>Cf</th>
      <th>Es</th>
      <th>Fm</th>
      <th>Md</th>
      <th>No</th>
      <th>Lr</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>mp-441</td>
      <td>Rb2Te</td>
      <td>3</td>
      <td>225</td>
      <td>159.501208</td>
      <td>[[1.75725875 1.2425695  3.04366125] Rb, [5.271...</td>
      <td>1.88</td>
      <td>[[3.44115795, -3.097e-05, -6.276e-05], [-2.837...</td>
      <td>[[6.23414745, -0.00035252, -9.796e-05], [-0.00...</td>
      <td>1.86</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>mp-22881</td>
      <td>CdCl2</td>
      <td>3</td>
      <td>166</td>
      <td>84.298097</td>
      <td>[[0. 0. 0.] Cd, [ 4.27210959  2.64061969 13.13...</td>
      <td>3.52</td>
      <td>[[3.34688382, -0.04498543, -0.22379197], [-0.0...</td>
      <td>[[7.97018673, -0.29423886, -1.463590159999999]...</td>
      <td>1.78</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>mp-28013</td>
      <td>MnI2</td>
      <td>3</td>
      <td>164</td>
      <td>108.335875</td>
      <td>[[0. 0. 0.] Mn, [-2.07904300e-06  2.40067320e+...</td>
      <td>1.17</td>
      <td>[[5.5430849, -5.28e-06, -2.5030000000000003e-0...</td>
      <td>[[13.80606079, 0.0006911900000000001, 9.655e-0...</td>
      <td>2.23</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>mp-567290</td>
      <td>LaN</td>
      <td>4</td>
      <td>186</td>
      <td>88.162562</td>
      <td>[[-1.73309900e-06  2.38611186e+00  5.95256328e...</td>
      <td>1.12</td>
      <td>[[7.09316738, 7.99e-06, -0.0003864700000000000...</td>
      <td>[[16.79535386, 8.199999999999997e-07, -0.00948...</td>
      <td>2.65</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>mp-560902</td>
      <td>MnF2</td>
      <td>6</td>
      <td>136</td>
      <td>82.826401</td>
      <td>[[1.677294 2.484476 2.484476] Mn, [0. 0. 0.] M...</td>
      <td>2.87</td>
      <td>[[2.4239622, 7.452000000000001e-05, 6.06100000...</td>
      <td>[[6.44055613, 0.0020446600000000002, 0.0013203...</td>
      <td>1.53</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 120 columns</p>
</div></div></div>
</div>
</section>
<section id="structure-featurizers">
<h3>Structure Featurizers<a class="headerlink" href="#structure-featurizers" title="Permalink to this headline">#</a></h3>
<p>We can use the same syntax for other kinds of featurizers. Let’s now assign descriptors to a structure. We do this with the same syntax as the composition featurizers. We’ll use the same dataset of dielectric materials properties.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;dielectric_constant&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s calculate some basic density features of these structures using <code class="docutils literal notranslate"><span class="pre">DensityFeatures</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">matminer.featurizers.structure</span> <span class="kn">import</span> <span class="n">DensityFeatures</span>

<span class="n">densityf</span> <span class="o">=</span> <span class="n">DensityFeatures</span><span class="p">()</span>
<span class="n">densityf</span><span class="o">.</span><span class="n">feature_labels</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;density&#39;, &#39;vpa&#39;, &#39;packing fraction&#39;]
</pre></div>
</div>
</div>
</div>
<p>These are the features we will get. Now we use <code class="docutils literal notranslate"><span class="pre">featurize_dataframe()</span></code> to generate these features for all the samples in the dataframe. Since we are using the structures as input to the featurizer, we select the “structure” column.</p>
<p>Let’s examine the dataframe and see the structural features.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">densityf</span><span class="o">.</span><span class="n">featurize_dataframe</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;structure&quot;</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"version_major": 2, "version_minor": 0, "model_id": "ec456de395c4498baf7c2c64cca26579"}
</script><div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>material_id</th>
      <th>formula</th>
      <th>nsites</th>
      <th>space_group</th>
      <th>volume</th>
      <th>structure</th>
      <th>band_gap</th>
      <th>e_electronic</th>
      <th>e_total</th>
      <th>n</th>
      <th>poly_electronic</th>
      <th>poly_total</th>
      <th>pot_ferroelectric</th>
      <th>cif</th>
      <th>meta</th>
      <th>poscar</th>
      <th>density</th>
      <th>vpa</th>
      <th>packing fraction</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>mp-441</td>
      <td>Rb2Te</td>
      <td>3</td>
      <td>225</td>
      <td>159.501208</td>
      <td>[[1.75725875 1.2425695  3.04366125] Rb, [5.271...</td>
      <td>1.88</td>
      <td>[[3.44115795, -3.097e-05, -6.276e-05], [-2.837...</td>
      <td>[[6.23414745, -0.00035252, -9.796e-05], [-0.00...</td>
      <td>1.86</td>
      <td>3.44</td>
      <td>6.23</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>Rb2 Te1\n1.0\n5.271776 0.000000 3.043661\n1.75...</td>
      <td>3.108002</td>
      <td>53.167069</td>
      <td>0.753707</td>
    </tr>
    <tr>
      <th>1</th>
      <td>mp-22881</td>
      <td>CdCl2</td>
      <td>3</td>
      <td>166</td>
      <td>84.298097</td>
      <td>[[0. 0. 0.] Cd, [ 4.27210959  2.64061969 13.13...</td>
      <td>3.52</td>
      <td>[[3.34688382, -0.04498543, -0.22379197], [-0.0...</td>
      <td>[[7.97018673, -0.29423886, -1.463590159999999]...</td>
      <td>1.78</td>
      <td>3.16</td>
      <td>6.73</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>Cd1 Cl2\n1.0\n3.850977 0.072671 5.494462\n1.78...</td>
      <td>3.611055</td>
      <td>28.099366</td>
      <td>0.284421</td>
    </tr>
    <tr>
      <th>2</th>
      <td>mp-28013</td>
      <td>MnI2</td>
      <td>3</td>
      <td>164</td>
      <td>108.335875</td>
      <td>[[0. 0. 0.] Mn, [-2.07904300e-06  2.40067320e+...</td>
      <td>1.17</td>
      <td>[[5.5430849, -5.28e-06, -2.5030000000000003e-0...</td>
      <td>[[13.80606079, 0.0006911900000000001, 9.655e-0...</td>
      <td>2.23</td>
      <td>4.97</td>
      <td>10.64</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>Mn1 I2\n1.0\n4.158086 0.000000 0.000000\n-2.07...</td>
      <td>4.732379</td>
      <td>36.111958</td>
      <td>0.318289</td>
    </tr>
    <tr>
      <th>3</th>
      <td>mp-567290</td>
      <td>LaN</td>
      <td>4</td>
      <td>186</td>
      <td>88.162562</td>
      <td>[[-1.73309900e-06  2.38611186e+00  5.95256328e...</td>
      <td>1.12</td>
      <td>[[7.09316738, 7.99e-06, -0.0003864700000000000...</td>
      <td>[[16.79535386, 8.199999999999997e-07, -0.00948...</td>
      <td>2.65</td>
      <td>7.04</td>
      <td>17.99</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>
      <td>La2 N2\n1.0\n4.132865 0.000000 0.000000\n-2.06...</td>
      <td>5.760192</td>
      <td>22.040641</td>
      <td>0.730689</td>
    </tr>
    <tr>
      <th>4</th>
      <td>mp-560902</td>
      <td>MnF2</td>
      <td>6</td>
      <td>136</td>
      <td>82.826401</td>
      <td>[[1.677294 2.484476 2.484476] Mn, [0. 0. 0.] M...</td>
      <td>2.87</td>
      <td>[[2.4239622, 7.452000000000001e-05, 6.06100000...</td>
      <td>[[6.44055613, 0.0020446600000000002, 0.0013203...</td>
      <td>1.53</td>
      <td>2.35</td>
      <td>7.12</td>
      <td>False</td>
      <td>#\#CIF1.1\n###################################...</td>
      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLDAUTYPE ...</td>
      <td>Mn2 F4\n1.0\n3.354588 0.000000 0.000000\n0.000...</td>
      <td>3.726395</td>
      <td>13.804400</td>
      <td>0.302832</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
</section>
<section id="simple-ml-models-using-our-matminer-features">
<h2>Simple ML models using our matminer features!<a class="headerlink" href="#simple-ml-models-using-our-matminer-features" title="Permalink to this headline">#</a></h2>
<p>We’ll fit a simple Ridge regression model to our dielectric dataset to predict the band gap of the material from simple composition features.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">matminer.datasets.dataset_retrieval</span> <span class="kn">import</span> <span class="n">load_dataset</span>
<span class="kn">from</span> <span class="nn">matminer.featurizers.composition.composite</span> <span class="kn">import</span> <span class="n">ElementProperty</span>
<span class="kn">from</span> <span class="nn">matminer.featurizers.conversions</span> <span class="kn">import</span> <span class="n">StrToComposition</span>
<span class="kn">from</span> <span class="nn">matminer.featurizers.structure</span> <span class="kn">import</span> <span class="n">DensityFeatures</span>

<span class="c1"># Load the dataset</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;dielectric_constant&quot;</span><span class="p">)</span>

<span class="c1"># Convert the formula to a composition object</span>
<span class="n">stc</span> <span class="o">=</span> <span class="n">StrToComposition</span><span class="p">()</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">stc</span><span class="o">.</span><span class="n">featurize_dataframe</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;formula&quot;</span><span class="p">,</span> <span class="n">pbar</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Generate magpie features</span>
<span class="n">ep_feat</span> <span class="o">=</span> <span class="n">ElementProperty</span><span class="o">.</span><span class="n">from_preset</span><span class="p">(</span><span class="n">preset_name</span><span class="o">=</span><span class="s2">&quot;magpie&quot;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">ep_feat</span><span class="o">.</span><span class="n">featurize_dataframe</span><span class="p">(</span>
    <span class="n">df</span><span class="p">,</span> <span class="n">col_id</span><span class="o">=</span><span class="s2">&quot;composition&quot;</span>
<span class="p">)</span>  <span class="c1"># input the &quot;composition&quot; column to the featurizer</span>

<span class="c1"># Add some density features from the structure</span>
<span class="n">densityf</span> <span class="o">=</span> <span class="n">DensityFeatures</span><span class="p">()</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">densityf</span><span class="o">.</span><span class="n">featurize_dataframe</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;structure&quot;</span><span class="p">)</span>

<span class="c1"># Show the resulting dataframe!</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"version_major": 2, "version_minor": 0, "model_id": "86ca5707b78143149365543d4b7f2831"}
</script><script type="application/vnd.jupyter.widget-view+json">
{"version_major": 2, "version_minor": 0, "model_id": "b015a46c8f764c25ad9950f5df88947f"}
</script><div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>material_id</th>
      <th>formula</th>
      <th>nsites</th>
      <th>space_group</th>
      <th>volume</th>
      <th>structure</th>
      <th>band_gap</th>
      <th>e_electronic</th>
      <th>e_total</th>
      <th>n</th>
      <th>...</th>
      <th>MagpieData mode GSmagmom</th>
      <th>MagpieData minimum SpaceGroupNumber</th>
      <th>MagpieData maximum SpaceGroupNumber</th>
      <th>MagpieData range SpaceGroupNumber</th>
      <th>MagpieData mean SpaceGroupNumber</th>
      <th>MagpieData avg_dev SpaceGroupNumber</th>
      <th>MagpieData mode SpaceGroupNumber</th>
      <th>density</th>
      <th>vpa</th>
      <th>packing fraction</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>mp-441</td>
      <td>Rb2Te</td>
      <td>3</td>
      <td>225</td>
      <td>159.501208</td>
      <td>[[1.75725875 1.2425695  3.04366125] Rb, [5.271...</td>
      <td>1.88</td>
      <td>[[3.44115795, -3.097e-05, -6.276e-05], [-2.837...</td>
      <td>[[6.23414745, -0.00035252, -9.796e-05], [-0.00...</td>
      <td>1.86</td>
      <td>...</td>
      <td>0.0</td>
      <td>152.0</td>
      <td>229.0</td>
      <td>77.0</td>
      <td>203.333333</td>
      <td>34.222222</td>
      <td>229.0</td>
      <td>3.108002</td>
      <td>53.167069</td>
      <td>0.753707</td>
    </tr>
    <tr>
      <th>1</th>
      <td>mp-22881</td>
      <td>CdCl2</td>
      <td>3</td>
      <td>166</td>
      <td>84.298097</td>
      <td>[[0. 0. 0.] Cd, [ 4.27210959  2.64061969 13.13...</td>
      <td>3.52</td>
      <td>[[3.34688382, -0.04498543, -0.22379197], [-0.0...</td>
      <td>[[7.97018673, -0.29423886, -1.463590159999999]...</td>
      <td>1.78</td>
      <td>...</td>
      <td>0.0</td>
      <td>64.0</td>
      <td>194.0</td>
      <td>130.0</td>
      <td>107.333333</td>
      <td>57.777778</td>
      <td>64.0</td>
      <td>3.611055</td>
      <td>28.099366</td>
      <td>0.284421</td>
    </tr>
    <tr>
      <th>2</th>
      <td>mp-28013</td>
      <td>MnI2</td>
      <td>3</td>
      <td>164</td>
      <td>108.335875</td>
      <td>[[0. 0. 0.] Mn, [-2.07904300e-06  2.40067320e+...</td>
      <td>1.17</td>
      <td>[[5.5430849, -5.28e-06, -2.5030000000000003e-0...</td>
      <td>[[13.80606079, 0.0006911900000000001, 9.655e-0...</td>
      <td>2.23</td>
      <td>...</td>
      <td>0.0</td>
      <td>64.0</td>
      <td>217.0</td>
      <td>153.0</td>
      <td>115.000000</td>
      <td>68.000000</td>
      <td>64.0</td>
      <td>4.732379</td>
      <td>36.111958</td>
      <td>0.318289</td>
    </tr>
    <tr>
      <th>3</th>
      <td>mp-567290</td>
      <td>LaN</td>
      <td>4</td>
      <td>186</td>
      <td>88.162562</td>
      <td>[[-1.73309900e-06  2.38611186e+00  5.95256328e...</td>
      <td>1.12</td>
      <td>[[7.09316738, 7.99e-06, -0.0003864700000000000...</td>
      <td>[[16.79535386, 8.199999999999997e-07, -0.00948...</td>
      <td>2.65</td>
      <td>...</td>
      <td>0.0</td>
      <td>194.0</td>
      <td>194.0</td>
      <td>0.0</td>
      <td>194.000000</td>
      <td>0.000000</td>
      <td>194.0</td>
      <td>5.760192</td>
      <td>22.040641</td>
      <td>0.730689</td>
    </tr>
    <tr>
      <th>4</th>
      <td>mp-560902</td>
      <td>MnF2</td>
      <td>6</td>
      <td>136</td>
      <td>82.826401</td>
      <td>[[1.677294 2.484476 2.484476] Mn, [0. 0. 0.] M...</td>
      <td>2.87</td>
      <td>[[2.4239622, 7.452000000000001e-05, 6.06100000...</td>
      <td>[[6.44055613, 0.0020446600000000002, 0.0013203...</td>
      <td>1.53</td>
      <td>...</td>
      <td>0.0</td>
      <td>15.0</td>
      <td>217.0</td>
      <td>202.0</td>
      <td>82.333333</td>
      <td>89.777778</td>
      <td>15.0</td>
      <td>3.726395</td>
      <td>13.804400</td>
      <td>0.302832</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 152 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;material_id&#39;,
 &#39;formula&#39;,
 &#39;nsites&#39;,
 &#39;space_group&#39;,
 &#39;volume&#39;,
 &#39;structure&#39;,
 &#39;band_gap&#39;,
 &#39;e_electronic&#39;,
 &#39;e_total&#39;,
 &#39;n&#39;,
 &#39;poly_electronic&#39;,
 &#39;poly_total&#39;,
 &#39;pot_ferroelectric&#39;,
 &#39;cif&#39;,
 &#39;meta&#39;,
 &#39;poscar&#39;,
 &#39;composition&#39;,
 &#39;MagpieData minimum Number&#39;,
 &#39;MagpieData maximum Number&#39;,
 &#39;MagpieData range Number&#39;,
 &#39;MagpieData mean Number&#39;,
 &#39;MagpieData avg_dev Number&#39;,
 &#39;MagpieData mode Number&#39;,
 &#39;MagpieData minimum MendeleevNumber&#39;,
 &#39;MagpieData maximum MendeleevNumber&#39;,
 &#39;MagpieData range MendeleevNumber&#39;,
 &#39;MagpieData mean MendeleevNumber&#39;,
 &#39;MagpieData avg_dev MendeleevNumber&#39;,
 &#39;MagpieData mode MendeleevNumber&#39;,
 &#39;MagpieData minimum AtomicWeight&#39;,
 &#39;MagpieData maximum AtomicWeight&#39;,
 &#39;MagpieData range AtomicWeight&#39;,
 &#39;MagpieData mean AtomicWeight&#39;,
 &#39;MagpieData avg_dev AtomicWeight&#39;,
 &#39;MagpieData mode AtomicWeight&#39;,
 &#39;MagpieData minimum MeltingT&#39;,
 &#39;MagpieData maximum MeltingT&#39;,
 &#39;MagpieData range MeltingT&#39;,
 &#39;MagpieData mean MeltingT&#39;,
 &#39;MagpieData avg_dev MeltingT&#39;,
 &#39;MagpieData mode MeltingT&#39;,
 &#39;MagpieData minimum Column&#39;,
 &#39;MagpieData maximum Column&#39;,
 &#39;MagpieData range Column&#39;,
 &#39;MagpieData mean Column&#39;,
 &#39;MagpieData avg_dev Column&#39;,
 &#39;MagpieData mode Column&#39;,
 &#39;MagpieData minimum Row&#39;,
 &#39;MagpieData maximum Row&#39;,
 &#39;MagpieData range Row&#39;,
 &#39;MagpieData mean Row&#39;,
 &#39;MagpieData avg_dev Row&#39;,
 &#39;MagpieData mode Row&#39;,
 &#39;MagpieData minimum CovalentRadius&#39;,
 &#39;MagpieData maximum CovalentRadius&#39;,
 &#39;MagpieData range CovalentRadius&#39;,
 &#39;MagpieData mean CovalentRadius&#39;,
 &#39;MagpieData avg_dev CovalentRadius&#39;,
 &#39;MagpieData mode CovalentRadius&#39;,
 &#39;MagpieData minimum Electronegativity&#39;,
 &#39;MagpieData maximum Electronegativity&#39;,
 &#39;MagpieData range Electronegativity&#39;,
 &#39;MagpieData mean Electronegativity&#39;,
 &#39;MagpieData avg_dev Electronegativity&#39;,
 &#39;MagpieData mode Electronegativity&#39;,
 &#39;MagpieData minimum NsValence&#39;,
 &#39;MagpieData maximum NsValence&#39;,
 &#39;MagpieData range NsValence&#39;,
 &#39;MagpieData mean NsValence&#39;,
 &#39;MagpieData avg_dev NsValence&#39;,
 &#39;MagpieData mode NsValence&#39;,
 &#39;MagpieData minimum NpValence&#39;,
 &#39;MagpieData maximum NpValence&#39;,
 &#39;MagpieData range NpValence&#39;,
 &#39;MagpieData mean NpValence&#39;,
 &#39;MagpieData avg_dev NpValence&#39;,
 &#39;MagpieData mode NpValence&#39;,
 &#39;MagpieData minimum NdValence&#39;,
 &#39;MagpieData maximum NdValence&#39;,
 &#39;MagpieData range NdValence&#39;,
 &#39;MagpieData mean NdValence&#39;,
 &#39;MagpieData avg_dev NdValence&#39;,
 &#39;MagpieData mode NdValence&#39;,
 &#39;MagpieData minimum NfValence&#39;,
 &#39;MagpieData maximum NfValence&#39;,
 &#39;MagpieData range NfValence&#39;,
 &#39;MagpieData mean NfValence&#39;,
 &#39;MagpieData avg_dev NfValence&#39;,
 &#39;MagpieData mode NfValence&#39;,
 &#39;MagpieData minimum NValence&#39;,
 &#39;MagpieData maximum NValence&#39;,
 &#39;MagpieData range NValence&#39;,
 &#39;MagpieData mean NValence&#39;,
 &#39;MagpieData avg_dev NValence&#39;,
 &#39;MagpieData mode NValence&#39;,
 &#39;MagpieData minimum NsUnfilled&#39;,
 &#39;MagpieData maximum NsUnfilled&#39;,
 &#39;MagpieData range NsUnfilled&#39;,
 &#39;MagpieData mean NsUnfilled&#39;,
 &#39;MagpieData avg_dev NsUnfilled&#39;,
 &#39;MagpieData mode NsUnfilled&#39;,
 &#39;MagpieData minimum NpUnfilled&#39;,
 &#39;MagpieData maximum NpUnfilled&#39;,
 &#39;MagpieData range NpUnfilled&#39;,
 &#39;MagpieData mean NpUnfilled&#39;,
 &#39;MagpieData avg_dev NpUnfilled&#39;,
 &#39;MagpieData mode NpUnfilled&#39;,
 &#39;MagpieData minimum NdUnfilled&#39;,
 &#39;MagpieData maximum NdUnfilled&#39;,
 &#39;MagpieData range NdUnfilled&#39;,
 &#39;MagpieData mean NdUnfilled&#39;,
 &#39;MagpieData avg_dev NdUnfilled&#39;,
 &#39;MagpieData mode NdUnfilled&#39;,
 &#39;MagpieData minimum NfUnfilled&#39;,
 &#39;MagpieData maximum NfUnfilled&#39;,
 &#39;MagpieData range NfUnfilled&#39;,
 &#39;MagpieData mean NfUnfilled&#39;,
 &#39;MagpieData avg_dev NfUnfilled&#39;,
 &#39;MagpieData mode NfUnfilled&#39;,
 &#39;MagpieData minimum NUnfilled&#39;,
 &#39;MagpieData maximum NUnfilled&#39;,
 &#39;MagpieData range NUnfilled&#39;,
 &#39;MagpieData mean NUnfilled&#39;,
 &#39;MagpieData avg_dev NUnfilled&#39;,
 &#39;MagpieData mode NUnfilled&#39;,
 &#39;MagpieData minimum GSvolume_pa&#39;,
 &#39;MagpieData maximum GSvolume_pa&#39;,
 &#39;MagpieData range GSvolume_pa&#39;,
 &#39;MagpieData mean GSvolume_pa&#39;,
 &#39;MagpieData avg_dev GSvolume_pa&#39;,
 &#39;MagpieData mode GSvolume_pa&#39;,
 &#39;MagpieData minimum GSbandgap&#39;,
 &#39;MagpieData maximum GSbandgap&#39;,
 &#39;MagpieData range GSbandgap&#39;,
 &#39;MagpieData mean GSbandgap&#39;,
 &#39;MagpieData avg_dev GSbandgap&#39;,
 &#39;MagpieData mode GSbandgap&#39;,
 &#39;MagpieData minimum GSmagmom&#39;,
 &#39;MagpieData maximum GSmagmom&#39;,
 &#39;MagpieData range GSmagmom&#39;,
 &#39;MagpieData mean GSmagmom&#39;,
 &#39;MagpieData avg_dev GSmagmom&#39;,
 &#39;MagpieData mode GSmagmom&#39;,
 &#39;MagpieData minimum SpaceGroupNumber&#39;,
 &#39;MagpieData maximum SpaceGroupNumber&#39;,
 &#39;MagpieData range SpaceGroupNumber&#39;,
 &#39;MagpieData mean SpaceGroupNumber&#39;,
 &#39;MagpieData avg_dev SpaceGroupNumber&#39;,
 &#39;MagpieData mode SpaceGroupNumber&#39;,
 &#39;density&#39;,
 &#39;vpa&#39;,
 &#39;packing fraction&#39;]
</pre></div>
</div>
</div>
</div>
<section id="train-test-split">
<h3>Train/test split<a class="headerlink" href="#train-test-split" title="Permalink to this headline">#</a></h3>
<p>We’re only going to fit one model in this example, so we’ll just use a single train/test split. We’d want to also use a validation split if we were going to try many possible models and select the best one.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>

<span class="n">df_train</span><span class="p">,</span> <span class="n">df_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="features-and-targets">
<h3>Features and targets<a class="headerlink" href="#features-and-targets" title="Permalink to this headline">#</a></h3>
<p>We now need to split the dataset into the “target” property, and the “features” used for learning. In this model, we will be using the band gap (<code class="docutils literal notranslate"><span class="pre">band_gap</span></code>) as the target property. We use the <code class="docutils literal notranslate"><span class="pre">values</span></code> attribute of the dataframe to give the target properties a numpy array, rather than pandas <code class="docutils literal notranslate"><span class="pre">Series</span></code> object.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">y_train</span> <span class="o">=</span> <span class="n">df_train</span><span class="p">[</span><span class="s2">&quot;band_gap&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="n">y_test</span> <span class="o">=</span> <span class="n">df_test</span><span class="p">[</span><span class="s2">&quot;band_gap&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

<span class="nb">print</span><span class="p">(</span><span class="n">y_test</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[4.01 4.09 3.06 3.2  0.93 1.07 0.21 0.82 3.71 0.54 5.14 1.8  4.19 2.54
 0.99 2.04 0.65 1.7  3.05 1.18 0.3  3.76 1.71 2.78 1.   1.54 1.19 1.31
 0.76 1.43 1.29 1.08 1.3  1.73 2.21 3.52 0.55 1.09 0.56 0.23 0.87 1.91
 3.25 0.83 3.15 0.61 1.81 2.94 2.09 0.37 0.45 1.02 1.56 0.46 0.51 4.05
 2.   5.15 0.86 0.41 0.86 0.69 0.97 0.81 2.23 0.21 0.49 1.25 0.71 1.43
 2.15 0.62 0.7  2.08 2.65 1.67 0.26 2.01 0.19 1.82 0.51 1.78 3.64 1.1
 0.65 0.79 3.43 0.85 0.87 4.17 6.56 2.82 0.53 0.4  3.74 0.11 2.87 0.11
 3.07 1.26 0.58 2.77 1.96 1.99 2.68 1.72 1.39 1.21 4.29 0.48 1.46 0.81
 1.02 2.13 1.68 1.08 2.48 1.37 0.58 0.28 0.43 2.93 0.97 3.3  1.55 3.57
 3.85 0.77 0.96 1.17 2.78 2.27 1.17 1.26 1.68 1.14 0.79 1.38 0.34 0.45
 0.47 5.94 0.6  0.93 0.99 0.79 0.82 4.57 3.9  6.88 1.9  1.7  1.52 2.14
 1.13 5.18 4.16 1.75 1.1  1.16 4.06 0.97 0.36 0.87 0.24 2.05 1.43 3.78
 0.89 1.88 2.64 4.88 2.27 0.26 0.6  3.56 0.23 6.95 1.54 0.64 1.8  1.69
 1.41 2.15 1.29 1.51 1.45 2.36 1.5  0.81 1.11 0.81 3.56 4.95 1.69 0.29
 2.42 0.36 0.83 1.74 5.57 0.21 2.11 3.46 2.3  0.52 0.24 2.02 2.35 2.94
 4.05 1.25 1.76 2.08 4.04 3.55 2.54 1.88 3.15 4.92 2.1  3.79 0.3  0.95
 1.27 4.6  1.37 3.58 3.07 2.41 1.75 3.72 5.61 2.26 1.57 1.12 2.41 3.69
 1.65 0.64 4.71 2.02 3.27 2.35 1.82 3.34 1.17 4.47 1.44 2.49 0.72 7.09
 0.69 1.91 1.4  4.04 1.04 0.68 3.05 0.66 0.48 8.32 6.23 1.42]
</pre></div>
</div>
</div>
</div>
<p>The machine learning algorithm can only use numerical features for training. Accordingly, we need to remove any non-numerical columns from our dataset. Additionally, we want to remove the <code class="docutils literal notranslate"><span class="pre">band_gap</span></code> column from the set of features, as the model should not know about the target property in advance.</p>
<p>The dataset loaded above, includes <code class="docutils literal notranslate"><span class="pre">structure</span></code>, <code class="docutils literal notranslate"><span class="pre">formula</span></code>, and <code class="docutils literal notranslate"><span class="pre">composition</span></code> columns that were previously used to generate the machine learnable features. Let’s remove them using the pandas <code class="docutils literal notranslate"><span class="pre">drop()</span></code> function, discussed in unit 1. Remember, <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> indicates we are dropping columns rather than rows.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_train</span><span class="p">[</span><span class="s1">&#39;structure&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Structure Summary
Lattice
    abc : 4.423580298196134 4.42358017388947 4.42358
 angles : 60.000001300353354 60.000002229924156 59.99999623959348
 volume : 61.20779090065246
      A : 3.830933 0.0 2.21179
      B : 1.276978 3.611838 2.21179
      C : 0.0 0.0 4.42358
    pbc : True True True
PeriodicSite: Sc (2.5540, 1.8059, 4.4236) [0.5000, 0.5000, 0.5000]
PeriodicSite: Ni (1.2770, 0.9030, 2.2118) [0.2500, 0.2500, 0.2500]
PeriodicSite: Bi (0.0000, 0.0000, 0.0000) [0.0000, 0.0000, 0.0000]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">X_train</span> <span class="o">=</span> <span class="n">df_train</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
        <span class="s2">&quot;formula&quot;</span><span class="p">,</span>
        <span class="s2">&quot;nsites&quot;</span><span class="p">,</span>
        <span class="s2">&quot;space_group&quot;</span><span class="p">,</span>
        <span class="s2">&quot;volume&quot;</span><span class="p">,</span>
        <span class="s2">&quot;band_gap&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e_electronic&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e_total&quot;</span><span class="p">,</span>
        <span class="s2">&quot;material_id&quot;</span><span class="p">,</span>
        <span class="s2">&quot;n&quot;</span><span class="p">,</span>
        <span class="s2">&quot;poly_electronic&quot;</span><span class="p">,</span>
        <span class="s2">&quot;poly_total&quot;</span><span class="p">,</span>
        <span class="s2">&quot;pot_ferroelectric&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cif&quot;</span><span class="p">,</span>
        <span class="s2">&quot;meta&quot;</span><span class="p">,</span>
        <span class="s2">&quot;poscar&quot;</span><span class="p">,</span>
        <span class="s2">&quot;composition&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">X_test</span> <span class="o">=</span> <span class="n">df_test</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="s2">&quot;structure&quot;</span><span class="p">,</span>
        <span class="s2">&quot;formula&quot;</span><span class="p">,</span>
        <span class="s2">&quot;nsites&quot;</span><span class="p">,</span>
        <span class="s2">&quot;space_group&quot;</span><span class="p">,</span>
        <span class="s2">&quot;volume&quot;</span><span class="p">,</span>
        <span class="s2">&quot;band_gap&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e_electronic&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e_total&quot;</span><span class="p">,</span>
        <span class="s2">&quot;material_id&quot;</span><span class="p">,</span>
        <span class="s2">&quot;n&quot;</span><span class="p">,</span>
        <span class="s2">&quot;poly_electronic&quot;</span><span class="p">,</span>
        <span class="s2">&quot;poly_total&quot;</span><span class="p">,</span>
        <span class="s2">&quot;pot_ferroelectric&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cif&quot;</span><span class="p">,</span>
        <span class="s2">&quot;meta&quot;</span><span class="p">,</span>
        <span class="s2">&quot;poscar&quot;</span><span class="p">,</span>
        <span class="s2">&quot;composition&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_train</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>material_id</th>
      <th>formula</th>
      <th>nsites</th>
      <th>space_group</th>
      <th>volume</th>
      <th>structure</th>
      <th>band_gap</th>
      <th>e_electronic</th>
      <th>e_total</th>
      <th>n</th>
      <th>...</th>
      <th>MagpieData mode GSmagmom</th>
      <th>MagpieData minimum SpaceGroupNumber</th>
      <th>MagpieData maximum SpaceGroupNumber</th>
      <th>MagpieData range SpaceGroupNumber</th>
      <th>MagpieData mean SpaceGroupNumber</th>
      <th>MagpieData avg_dev SpaceGroupNumber</th>
      <th>MagpieData mode SpaceGroupNumber</th>
      <th>density</th>
      <th>vpa</th>
      <th>packing fraction</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1029</th>
      <td>mp-30459</td>
      <td>ScNiBi</td>
      <td>3</td>
      <td>216</td>
      <td>61.207791</td>
      <td>[[2.5539555 1.805919  4.42358  ] Sc, [1.276977...</td>
      <td>0.18</td>
      <td>[[22.94877947, 2.12e-06, 0.0], [2.12e-06, 22.9...</td>
      <td>[[26.976201600000003, -0.00111349, -5.69700000...</td>
      <td>4.79</td>
      <td>...</td>
      <td>0.0</td>
      <td>12.0</td>
      <td>225.0</td>
      <td>213.0</td>
      <td>143.666667</td>
      <td>87.777778</td>
      <td>12.0</td>
      <td>8.481500</td>
      <td>20.402597</td>
      <td>0.729001</td>
    </tr>
    <tr>
      <th>37</th>
      <td>mp-2286</td>
      <td>Li2Se</td>
      <td>3</td>
      <td>225</td>
      <td>54.535575</td>
      <td>[[1.22878075 0.868879   2.12831025] Li, [3.686...</td>
      <td>2.97</td>
      <td>[[4.32498641, -8.96e-06, -1.85e-06], [-6.82e-0...</td>
      <td>[[7.8439030800000005, 0.00013394, 0.00020593],...</td>
      <td>2.08</td>
      <td>...</td>
      <td>0.0</td>
      <td>14.0</td>
      <td>229.0</td>
      <td>215.0</td>
      <td>157.333333</td>
      <td>95.555556</td>
      <td>229.0</td>
      <td>2.826921</td>
      <td>18.178525</td>
      <td>0.585136</td>
    </tr>
    <tr>
      <th>967</th>
      <td>mp-13907</td>
      <td>CdSnF6</td>
      <td>8</td>
      <td>148</td>
      <td>131.333529</td>
      <td>[[3.325624 2.282497 6.275115] Cd, [0. 0. 0.] S...</td>
      <td>3.85</td>
      <td>[[2.25169877, 0.00648787, 0.0178374], [0.00648...</td>
      <td>[[5.64652453, 0.10618079, 0.29189694], [0.1061...</td>
      <td>1.50</td>
      <td>...</td>
      <td>0.0</td>
      <td>15.0</td>
      <td>194.0</td>
      <td>179.0</td>
      <td>53.125000</td>
      <td>57.187500</td>
      <td>15.0</td>
      <td>4.363478</td>
      <td>16.416691</td>
      <td>0.239925</td>
    </tr>
    <tr>
      <th>158</th>
      <td>mp-570589</td>
      <td>SeBr</td>
      <td>8</td>
      <td>41</td>
      <td>289.976151</td>
      <td>[[1.99918953 3.9326561  8.29253122] Se, [1.692...</td>
      <td>1.51</td>
      <td>[[4.16625032, 0.02740518, 4.5910000000000006e-...</td>
      <td>[[4.79880781, -0.044334540000000006, 0.0001055...</td>
      <td>2.16</td>
      <td>...</td>
      <td>0.0</td>
      <td>14.0</td>
      <td>64.0</td>
      <td>50.0</td>
      <td>39.000000</td>
      <td>25.000000</td>
      <td>14.0</td>
      <td>3.638918</td>
      <td>36.247019</td>
      <td>0.175756</td>
    </tr>
    <tr>
      <th>40</th>
      <td>mp-241</td>
      <td>CdF2</td>
      <td>3</td>
      <td>225</td>
      <td>41.425175</td>
      <td>[[0. 0. 0.] Cd, [3.363492   2.37834825 5.82573...</td>
      <td>2.90</td>
      <td>[[2.80335139, -7.37e-06, -4.769999999999999e-0...</td>
      <td>[[9.0235134, -0.00014366000000000002, 8.784000...</td>
      <td>1.67</td>
      <td>...</td>
      <td>0.0</td>
      <td>15.0</td>
      <td>194.0</td>
      <td>179.0</td>
      <td>74.666667</td>
      <td>79.555556</td>
      <td>15.0</td>
      <td>6.029137</td>
      <td>13.808392</td>
      <td>0.401826</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1033</th>
      <td>mp-7128</td>
      <td>Cd(AsO3)2</td>
      <td>9</td>
      <td>162</td>
      <td>104.870657</td>
      <td>[[0. 0. 0.] Cd, [2.46425346 1.42273458 2.49266...</td>
      <td>1.93</td>
      <td>[[4.44503372, 0.0, 0.0], [0.0, 4.44503385, 0.0...</td>
      <td>[[12.81734037, 0.0, 3.704e-05], [0.0, 12.81736...</td>
      <td>2.05</td>
      <td>...</td>
      <td>0.0</td>
      <td>12.0</td>
      <td>194.0</td>
      <td>182.0</td>
      <td>66.444444</td>
      <td>72.592593</td>
      <td>12.0</td>
      <td>5.672598</td>
      <td>11.652295</td>
      <td>0.322001</td>
    </tr>
    <tr>
      <th>763</th>
      <td>mp-556953</td>
      <td>RbPS3</td>
      <td>10</td>
      <td>71</td>
      <td>308.224888</td>
      <td>[[5.32468348 4.81070102 5.25652518] Rb, [3.896...</td>
      <td>1.83</td>
      <td>[[3.56620901, -0.19981647, 0.0845237], [-0.199...</td>
      <td>[[7.890812780000001, -0.42845974000000003, 0.1...</td>
      <td>1.86</td>
      <td>...</td>
      <td>0.0</td>
      <td>2.0</td>
      <td>229.0</td>
      <td>227.0</td>
      <td>88.200000</td>
      <td>56.320000</td>
      <td>70.0</td>
      <td>2.291128</td>
      <td>30.822489</td>
      <td>0.461460</td>
    </tr>
    <tr>
      <th>835</th>
      <td>mp-5033</td>
      <td>Tl2SiF6</td>
      <td>9</td>
      <td>225</td>
      <td>162.324605</td>
      <td>[[5.30270025 3.7495755  9.18454575] Tl, [1.767...</td>
      <td>4.98</td>
      <td>[[2.48679373, 1.7000000000000001e-07, -2.29999...</td>
      <td>[[16.05509624, -3.397000000000001e-05, 8.79999...</td>
      <td>1.58</td>
      <td>...</td>
      <td>0.0</td>
      <td>15.0</td>
      <td>227.0</td>
      <td>212.0</td>
      <td>78.333333</td>
      <td>84.444444</td>
      <td>15.0</td>
      <td>5.634978</td>
      <td>18.036067</td>
      <td>0.407694</td>
    </tr>
    <tr>
      <th>559</th>
      <td>mp-560976</td>
      <td>KNiF3</td>
      <td>5</td>
      <td>221</td>
      <td>67.378004</td>
      <td>[[0. 0. 0.] K, [2.034586 2.034586 2.034586] Ni...</td>
      <td>4.55</td>
      <td>[[2.33095883, 0.0, 0.0], [0.0, 2.33095883, 0.0...</td>
      <td>[[7.24240227, 0.0, 0.0], [0.0, 7.24272155, 0.0...</td>
      <td>1.53</td>
      <td>...</td>
      <td>0.0</td>
      <td>15.0</td>
      <td>229.0</td>
      <td>214.0</td>
      <td>99.800000</td>
      <td>101.760000</td>
      <td>15.0</td>
      <td>3.814742</td>
      <td>13.475601</td>
      <td>0.838241</td>
    </tr>
    <tr>
      <th>684</th>
      <td>mp-510624</td>
      <td>SrFeO3</td>
      <td>5</td>
      <td>221</td>
      <td>59.859753</td>
      <td>[[1.95590359 1.95590359 1.95590359] Sr, [0. 0....</td>
      <td>0.33</td>
      <td>[[53.41106541, 0.0, 0.0], [0.0, 53.41106541, 0...</td>
      <td>[[70.89885815, 0.0, 0.0], [0.0, 70.89003301, 0...</td>
      <td>7.31</td>
      <td>...</td>
      <td>0.0</td>
      <td>12.0</td>
      <td>229.0</td>
      <td>217.0</td>
      <td>98.000000</td>
      <td>103.200000</td>
      <td>12.0</td>
      <td>5.311284</td>
      <td>11.971951</td>
      <td>0.797175</td>
    </tr>
  </tbody>
</table>
<p>792 rows × 152 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">X_train</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>MagpieData minimum Number</th>
      <th>MagpieData maximum Number</th>
      <th>MagpieData range Number</th>
      <th>MagpieData mean Number</th>
      <th>MagpieData avg_dev Number</th>
      <th>MagpieData mode Number</th>
      <th>MagpieData minimum MendeleevNumber</th>
      <th>MagpieData maximum MendeleevNumber</th>
      <th>MagpieData range MendeleevNumber</th>
      <th>MagpieData mean MendeleevNumber</th>
      <th>...</th>
      <th>MagpieData mode GSmagmom</th>
      <th>MagpieData minimum SpaceGroupNumber</th>
      <th>MagpieData maximum SpaceGroupNumber</th>
      <th>MagpieData range SpaceGroupNumber</th>
      <th>MagpieData mean SpaceGroupNumber</th>
      <th>MagpieData avg_dev SpaceGroupNumber</th>
      <th>MagpieData mode SpaceGroupNumber</th>
      <th>density</th>
      <th>vpa</th>
      <th>packing fraction</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1029</th>
      <td>21.0</td>
      <td>83.0</td>
      <td>62.0</td>
      <td>44.000000</td>
      <td>26.000000</td>
      <td>21.0</td>
      <td>11.0</td>
      <td>86.0</td>
      <td>75.0</td>
      <td>52.666667</td>
      <td>...</td>
      <td>0.0</td>
      <td>12.0</td>
      <td>225.0</td>
      <td>213.0</td>
      <td>143.666667</td>
      <td>87.777778</td>
      <td>12.0</td>
      <td>8.481500</td>
      <td>20.402597</td>
      <td>0.729001</td>
    </tr>
    <tr>
      <th>37</th>
      <td>3.0</td>
      <td>34.0</td>
      <td>31.0</td>
      <td>13.333333</td>
      <td>13.777778</td>
      <td>3.0</td>
      <td>1.0</td>
      <td>89.0</td>
      <td>88.0</td>
      <td>30.333333</td>
      <td>...</td>
      <td>0.0</td>
      <td>14.0</td>
      <td>229.0</td>
      <td>215.0</td>
      <td>157.333333</td>
      <td>95.555556</td>
      <td>229.0</td>
      <td>2.826921</td>
      <td>18.178525</td>
      <td>0.585136</td>
    </tr>
    <tr>
      <th>967</th>
      <td>9.0</td>
      <td>50.0</td>
      <td>41.0</td>
      <td>19.000000</td>
      <td>15.000000</td>
      <td>9.0</td>
      <td>70.0</td>
      <td>93.0</td>
      <td>23.0</td>
      <td>88.500000</td>
      <td>...</td>
      <td>0.0</td>
      <td>15.0</td>
      <td>194.0</td>
      <td>179.0</td>
      <td>53.125000</td>
      <td>57.187500</td>
      <td>15.0</td>
      <td>4.363478</td>
      <td>16.416691</td>
      <td>0.239925</td>
    </tr>
    <tr>
      <th>158</th>
      <td>34.0</td>
      <td>35.0</td>
      <td>1.0</td>
      <td>34.500000</td>
      <td>0.500000</td>
      <td>34.0</td>
      <td>89.0</td>
      <td>95.0</td>
      <td>6.0</td>
      <td>92.000000</td>
      <td>...</td>
      <td>0.0</td>
      <td>14.0</td>
      <td>64.0</td>
      <td>50.0</td>
      <td>39.000000</td>
      <td>25.000000</td>
      <td>14.0</td>
      <td>3.638918</td>
      <td>36.247019</td>
      <td>0.175756</td>
    </tr>
    <tr>
      <th>40</th>
      <td>9.0</td>
      <td>48.0</td>
      <td>39.0</td>
      <td>22.000000</td>
      <td>17.333333</td>
      <td>9.0</td>
      <td>70.0</td>
      <td>93.0</td>
      <td>23.0</td>
      <td>85.333333</td>
      <td>...</td>
      <td>0.0</td>
      <td>15.0</td>
      <td>194.0</td>
      <td>179.0</td>
      <td>74.666667</td>
      <td>79.555556</td>
      <td>15.0</td>
      <td>6.029137</td>
      <td>13.808392</td>
      <td>0.401826</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1033</th>
      <td>8.0</td>
      <td>48.0</td>
      <td>40.0</td>
      <td>18.000000</td>
      <td>13.333333</td>
      <td>8.0</td>
      <td>70.0</td>
      <td>87.0</td>
      <td>17.0</td>
      <td>84.444444</td>
      <td>...</td>
      <td>0.0</td>
      <td>12.0</td>
      <td>194.0</td>
      <td>182.0</td>
      <td>66.444444</td>
      <td>72.592593</td>
      <td>12.0</td>
      <td>5.672598</td>
      <td>11.652295</td>
      <td>0.322001</td>
    </tr>
    <tr>
      <th>763</th>
      <td>15.0</td>
      <td>37.0</td>
      <td>22.0</td>
      <td>20.000000</td>
      <td>6.800000</td>
      <td>16.0</td>
      <td>4.0</td>
      <td>88.0</td>
      <td>84.0</td>
      <td>70.200000</td>
      <td>...</td>
      <td>0.0</td>
      <td>2.0</td>
      <td>229.0</td>
      <td>227.0</td>
      <td>88.200000</td>
      <td>56.320000</td>
      <td>70.0</td>
      <td>2.291128</td>
      <td>30.822489</td>
      <td>0.461460</td>
    </tr>
    <tr>
      <th>835</th>
      <td>9.0</td>
      <td>81.0</td>
      <td>72.0</td>
      <td>25.555556</td>
      <td>24.641975</td>
      <td>9.0</td>
      <td>76.0</td>
      <td>93.0</td>
      <td>17.0</td>
      <td>87.555556</td>
      <td>...</td>
      <td>0.0</td>
      <td>15.0</td>
      <td>227.0</td>
      <td>212.0</td>
      <td>78.333333</td>
      <td>84.444444</td>
      <td>15.0</td>
      <td>5.634978</td>
      <td>18.036067</td>
      <td>0.407694</td>
    </tr>
    <tr>
      <th>559</th>
      <td>9.0</td>
      <td>28.0</td>
      <td>19.0</td>
      <td>14.800000</td>
      <td>6.960000</td>
      <td>9.0</td>
      <td>3.0</td>
      <td>93.0</td>
      <td>90.0</td>
      <td>68.600000</td>
      <td>...</td>
      <td>0.0</td>
      <td>15.0</td>
      <td>229.0</td>
      <td>214.0</td>
      <td>99.800000</td>
      <td>101.760000</td>
      <td>15.0</td>
      <td>3.814742</td>
      <td>13.475601</td>
      <td>0.838241</td>
    </tr>
    <tr>
      <th>684</th>
      <td>8.0</td>
      <td>38.0</td>
      <td>30.0</td>
      <td>17.600000</td>
      <td>11.520000</td>
      <td>8.0</td>
      <td>8.0</td>
      <td>87.0</td>
      <td>79.0</td>
      <td>64.800000</td>
      <td>...</td>
      <td>0.0</td>
      <td>12.0</td>
      <td>229.0</td>
      <td>217.0</td>
      <td>98.000000</td>
      <td>103.200000</td>
      <td>12.0</td>
      <td>5.311284</td>
      <td>11.971951</td>
      <td>0.797175</td>
    </tr>
  </tbody>
</table>
<p>792 rows × 135 columns</p>
</div></div></div>
</div>
<p>We can see all the descriptors in model using the <code class="docutils literal notranslate"><span class="pre">columns</span></code> attribute.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;There are </span><span class="si">{}</span><span class="s2"> possible descriptors:&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">X_train</span><span class="o">.</span><span class="n">columns</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">X_train</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>There are 135 possible descriptors:
Index([&#39;MagpieData minimum Number&#39;, &#39;MagpieData maximum Number&#39;,
       &#39;MagpieData range Number&#39;, &#39;MagpieData mean Number&#39;,
       &#39;MagpieData avg_dev Number&#39;, &#39;MagpieData mode Number&#39;,
       &#39;MagpieData minimum MendeleevNumber&#39;,
       &#39;MagpieData maximum MendeleevNumber&#39;,
       &#39;MagpieData range MendeleevNumber&#39;, &#39;MagpieData mean MendeleevNumber&#39;,
       ...
       &#39;MagpieData mode GSmagmom&#39;, &#39;MagpieData minimum SpaceGroupNumber&#39;,
       &#39;MagpieData maximum SpaceGroupNumber&#39;,
       &#39;MagpieData range SpaceGroupNumber&#39;, &#39;MagpieData mean SpaceGroupNumber&#39;,
       &#39;MagpieData avg_dev SpaceGroupNumber&#39;,
       &#39;MagpieData mode SpaceGroupNumber&#39;, &#39;density&#39;, &#39;vpa&#39;,
       &#39;packing fraction&#39;],
      dtype=&#39;object&#39;, length=135)
</pre></div>
</div>
</div>
</div>
</section>
<section id="simple-ridge-regression">
<h3>Simple Ridge regression<a class="headerlink" href="#simple-ridge-regression" title="Permalink to this headline">#</a></h3>
<p>Let’s try a ridge regression model that we learned about last week!</p>
<p>We can now train our model to use the input features (<code class="docutils literal notranslate"><span class="pre">X</span></code>) to predict the target property (<code class="docutils literal notranslate"><span class="pre">y</span></code>). This is achieved using the <code class="docutils literal notranslate"><span class="pre">fit()</span></code> function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">X_train</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(792, 135)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">Ridge</span><span class="p">,</span> <span class="n">Lasso</span>
<span class="kn">from</span> <span class="nn">sklearn.pipeline</span> <span class="kn">import</span> <span class="n">make_pipeline</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">Lasso</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="o">.</span><span class="n">values</span><span class="p">[:</span><span class="mi">100</span><span class="p">,:],</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">y_train</span><span class="p">)[:</span><span class="mi">100</span><span class="p">,])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span> <span class="p">[</span><span class="mi">36</span><span class="p">],</span> <span class="n">line</span> <span class="mi">6</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="n">model</span> <span class="o">=</span> <span class="n">Lasso</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="ne">----&gt; </span><span class="mi">6</span> <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="o">.</span><span class="n">values</span><span class="p">[:</span><span class="mi">100</span><span class="p">,:],</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">y_train</span><span class="p">)[:</span><span class="mi">100</span><span class="p">,])</span>

<span class="ne">NameError</span>: name &#39;np&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
<section id="evaluating-model-performance">
<h3>Evaluating model performance<a class="headerlink" href="#evaluating-model-performance" title="Permalink to this headline">#</a></h3>
<p>Next, we need to assess how the model is performing. To do this, we first ask the model to predict the bulk modulus for every entry in our original dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">y_pred</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/conda/lib/python3.9/site-packages/sklearn/base.py:443: UserWarning:

X has feature names, but Lasso was fitted without feature names
</pre></div>
</div>
</div>
</div>
<p>Next, we can check the accuracy of our model by looking at the <em>root mean squared error</em> of our predictions. Scikit-learn provides a <code class="docutils literal notranslate"><span class="pre">mean_squared_error()</span></code> function to calculate the mean squared error. We then take the square-root of this to obtain our final performance metric.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">mean_squared_error</span>

<span class="n">mse</span> <span class="o">=</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;training RMSE = </span><span class="si">{:.3f}</span><span class="s2"> eV&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">mse</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>training RMSE = 1.556 eV
</pre></div>
</div>
</div>
</div>
<p>An RMSE of  1 eV is pretty reasonable! A state-of-the-art ML model should be able to get lower than this.</p>
</section>
<section id="visualizing-model-performance">
<h3>Visualizing model performance<a class="headerlink" href="#visualizing-model-performance" title="Permalink to this headline">#</a></h3>
<p>Let’s now add our predicted values to our dataframe and calculate an absolute percentage error for each sample.</p>
<p>We can do this conveniently for all of our samples with the dataframe columns.</p>
<p>If we scroll to the end of the dataframe, our predicted <code class="docutils literal notranslate"><span class="pre">band_gap</span></code> and percentage errors are given for each sample. This might allow us to examine manually which samples are performing well and which are performing poorly.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_test</span><span class="p">[</span><span class="s2">&quot;band_gap_predicted&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">))</span>
<span class="n">df_test</span><span class="p">[</span><span class="s2">&quot;percentage_error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="n">df_test</span><span class="p">[</span><span class="s2">&quot;band_gap&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df_test</span><span class="p">[</span><span class="s2">&quot;band_gap_predicted&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">abs</span><span class="p">()</span>
    <span class="o">/</span> <span class="n">df_test</span><span class="p">[</span><span class="s2">&quot;band_gap&quot;</span><span class="p">]</span>
    <span class="o">*</span> <span class="mi">100</span>
<span class="p">)</span>

<span class="n">df_train</span><span class="p">[</span><span class="s2">&quot;band_gap_predicted&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_train</span><span class="p">))</span>
<span class="n">df_train</span><span class="p">[</span><span class="s2">&quot;percentage_error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="n">df_train</span><span class="p">[</span><span class="s2">&quot;band_gap&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df_train</span><span class="p">[</span><span class="s2">&quot;band_gap_predicted&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">abs</span><span class="p">()</span>
    <span class="o">/</span> <span class="n">df_train</span><span class="p">[</span><span class="s2">&quot;band_gap&quot;</span><span class="p">]</span>
    <span class="o">*</span> <span class="mi">100</span>
<span class="p">)</span>


<span class="n">df_train</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/conda/lib/python3.9/site-packages/sklearn/base.py:443: UserWarning:

X has feature names, but Lasso was fitted without feature names

/opt/conda/lib/python3.9/site-packages/sklearn/base.py:443: UserWarning:

X has feature names, but Lasso was fitted without feature names
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>material_id</th>
      <th>formula</th>
      <th>nsites</th>
      <th>space_group</th>
      <th>volume</th>
      <th>structure</th>
      <th>band_gap</th>
      <th>e_electronic</th>
      <th>e_total</th>
      <th>n</th>
      <th>...</th>
      <th>MagpieData maximum SpaceGroupNumber</th>
      <th>MagpieData range SpaceGroupNumber</th>
      <th>MagpieData mean SpaceGroupNumber</th>
      <th>MagpieData avg_dev SpaceGroupNumber</th>
      <th>MagpieData mode SpaceGroupNumber</th>
      <th>density</th>
      <th>vpa</th>
      <th>packing fraction</th>
      <th>band_gap_predicted</th>
      <th>percentage_error</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1029</th>
      <td>mp-30459</td>
      <td>ScNiBi</td>
      <td>3</td>
      <td>216</td>
      <td>61.207791</td>
      <td>[[2.5539555 1.805919  4.42358  ] Sc, [1.276977...</td>
      <td>0.18</td>
      <td>[[22.94877947, 2.12e-06, 0.0], [2.12e-06, 22.9...</td>
      <td>[[26.976201600000003, -0.00111349, -5.69700000...</td>
      <td>4.79</td>
      <td>...</td>
      <td>225.0</td>
      <td>213.0</td>
      <td>143.666667</td>
      <td>87.777778</td>
      <td>12.0</td>
      <td>8.481500</td>
      <td>20.402597</td>
      <td>0.729001</td>
      <td>0.459938</td>
      <td>155.521185</td>
    </tr>
    <tr>
      <th>37</th>
      <td>mp-2286</td>
      <td>Li2Se</td>
      <td>3</td>
      <td>225</td>
      <td>54.535575</td>
      <td>[[1.22878075 0.868879   2.12831025] Li, [3.686...</td>
      <td>2.97</td>
      <td>[[4.32498641, -8.96e-06, -1.85e-06], [-6.82e-0...</td>
      <td>[[7.8439030800000005, 0.00013394, 0.00020593],...</td>
      <td>2.08</td>
      <td>...</td>
      <td>229.0</td>
      <td>215.0</td>
      <td>157.333333</td>
      <td>95.555556</td>
      <td>229.0</td>
      <td>2.826921</td>
      <td>18.178525</td>
      <td>0.585136</td>
      <td>1.092819</td>
      <td>63.204752</td>
    </tr>
    <tr>
      <th>967</th>
      <td>mp-13907</td>
      <td>CdSnF6</td>
      <td>8</td>
      <td>148</td>
      <td>131.333529</td>
      <td>[[3.325624 2.282497 6.275115] Cd, [0. 0. 0.] S...</td>
      <td>3.85</td>
      <td>[[2.25169877, 0.00648787, 0.0178374], [0.00648...</td>
      <td>[[5.64652453, 0.10618079, 0.29189694], [0.1061...</td>
      <td>1.50</td>
      <td>...</td>
      <td>194.0</td>
      <td>179.0</td>
      <td>53.125000</td>
      <td>57.187500</td>
      <td>15.0</td>
      <td>4.363478</td>
      <td>16.416691</td>
      <td>0.239925</td>
      <td>2.311244</td>
      <td>39.967687</td>
    </tr>
    <tr>
      <th>158</th>
      <td>mp-570589</td>
      <td>SeBr</td>
      <td>8</td>
      <td>41</td>
      <td>289.976151</td>
      <td>[[1.99918953 3.9326561  8.29253122] Se, [1.692...</td>
      <td>1.51</td>
      <td>[[4.16625032, 0.02740518, 4.5910000000000006e-...</td>
      <td>[[4.79880781, -0.044334540000000006, 0.0001055...</td>
      <td>2.16</td>
      <td>...</td>
      <td>64.0</td>
      <td>50.0</td>
      <td>39.000000</td>
      <td>25.000000</td>
      <td>14.0</td>
      <td>3.638918</td>
      <td>36.247019</td>
      <td>0.175756</td>
      <td>1.491592</td>
      <td>1.219078</td>
    </tr>
    <tr>
      <th>40</th>
      <td>mp-241</td>
      <td>CdF2</td>
      <td>3</td>
      <td>225</td>
      <td>41.425175</td>
      <td>[[0. 0. 0.] Cd, [3.363492   2.37834825 5.82573...</td>
      <td>2.90</td>
      <td>[[2.80335139, -7.37e-06, -4.769999999999999e-0...</td>
      <td>[[9.0235134, -0.00014366000000000002, 8.784000...</td>
      <td>1.67</td>
      <td>...</td>
      <td>194.0</td>
      <td>179.0</td>
      <td>74.666667</td>
      <td>79.555556</td>
      <td>15.0</td>
      <td>6.029137</td>
      <td>13.808392</td>
      <td>0.401826</td>
      <td>2.201649</td>
      <td>24.081060</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 154 columns</p>
</div></div></div>
</div>
<p>Finally, let’s plot our data with plotly.</p>
<p>We make two series of data:</p>
<ul class="simple">
<li><p>First, a reference line indicating “perfect” peformance of the model.</p></li>
<li><p>Second, a scatter plot of the predicted band_gap vs the actual band_gap for the train set</p></li>
<li><p>Finally, a scatter plot of the predicted band_gap vs the actual band_gap for the test set</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objects</span> <span class="k">as</span> <span class="nn">go</span>

<span class="n">reference_line</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
    <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
    <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">dash</span><span class="o">=</span><span class="s2">&quot;dash&quot;</span><span class="p">),</span>
    <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;lines&quot;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Parity Line&quot;</span><span class="p">,</span>
    <span class="n">showlegend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
    <span class="n">df_train</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;band_gap&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;band_gap_predicted&quot;</span><span class="p">,</span>
    <span class="n">hover_name</span><span class="o">=</span><span class="s2">&quot;formula&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
    <span class="n">px</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
        <span class="n">df_test</span><span class="p">,</span>
        <span class="n">x</span><span class="o">=</span><span class="s2">&quot;band_gap&quot;</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="s2">&quot;band_gap_predicted&quot;</span><span class="p">,</span>
        <span class="n">hover_name</span><span class="o">=</span><span class="s2">&quot;formula&quot;</span><span class="p">,</span>
        <span class="n">color_discrete_sequence</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">],</span>
    <span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span><span class="n">reference_line</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>                            <div id="f9bbe89b-70c9-4c9a-bab7-34930069209a" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("f9bbe89b-70c9-4c9a-bab7-34930069209a")) {                    Plotly.newPlot(                        "f9bbe89b-70c9-4c9a-bab7-34930069209a",                        [{"hovertemplate":"<b>%{hovertext}</b><br><br>band_gap=%{x}<br>band_gap_predicted=%{y}<extra></extra>","hovertext":["ScNiBi","Li2Se","CdSnF6","SeBr","CdF2","Ca3AsCl3","KMgH3","K2Ti2O5","K2CuP","RbNO3","CaBr2","KMgSb","TaSbRu","Ba(MgAs)2","K3Sb","InClO","LiNbO2","TlAsF6","K2NaAs","Li2S","SrH2","NaP","YHSe","Si3N4","PtCl2","CrSBr","Na2Te","CdHgO2","Y2Cl3","CrAgO2","RbBiF6","BCl3","K2Te","BeSe","Rb2PtS2","SrCl2","Na2PdS2","CrMoF6","Na3SbSe4","BaP3","SiO2","CdGeP2","SnF2","CrHgF6","Fe(SiP)4","NaHO","Ca(MgBi)2","NaPF6","Zn(PtO2)3","BP","ZnO2","Ba(InTe2)2","Sr4Sb2O","K4CdAs2","Ca2ZnN2","CdTe","KSnAs","KZnAs","SbF3","Tl3AsS3","RbCuO2","KNbO3","MnPtF6","MgPdF6","Ba(CuS)2","PtO2","Ca(AsO3)2","Cs2SnF6","SnF3","PI3","KVF3","SnS2","SiO2","Cs2SeCl6","Sr2HN","Sr3SbN","AlF3","TlSbO3","Na2CuAs","NaCrS2","SnSe","CdAs2","CdS","Fe2O3","LiNiF3","LaClO","KCuO2","Rh2S3","Cd(GaS2)2","AlAgTe2","Ge3N4","NaCuTe","YNiSb","KZnSb","BAsO4","SnF2","HgF2","KLaTe2","K4HgAs2","CaPtO3","LiCaAs","MnO2","Li2AgSb","CsAu","GaN","B6P","K2GeF6","NaHO","AlP","Li3Sb","CaTe","BN","NaNbO2","InS","CsNO3","CsAu3Se2","Sb2PbO6","Cs2TiCl6","IBr","CaSe","Sr3BiN","Mg3Sb2","As2O3","NaCrO2","VF2","Ca3BiN","Cs2HfI6","Ba2H6Ru","ZnS","ZnPtF6","MgB4","CdI2","Li2Te","LaBr3","RhCl3","NiF2","SiC","BeI2","CsGeBr3","SiC","KCaBi","Al2CdTe4","K2PdF4","Rb2TeBr6","N2O5","Cd(GaSe2)2","Sr2SbAu","CaO2","SrIF","LaSeF","IrCl3","LiBeP","CdI2","Ga2HgS4","As2O3","RbCrO2","NiO","AsCl3","KAsF6","NaSbO3","CoO","FeF3","NbS3","InSiTe3","MnO2","AsF3","NiSnF6","AuBr","PdF4","K4I2O","KIO3","RbF2","CaCl2","K2PtSe2","CdBr2","LiGaTe2","FeP4","MoBr3","Cl2O7","RbBiO2","Rb2HfF6","BPO4","K3AuO","Mg(HO)2","ScF3","ZnSiAs2","SnO","RbNaO","Ba(MgP)2","Zn(GaS2)2","SbCl3","SiC","CsK2Sb","Be2C","CsN3","AlCl3","FeAgO2","GaS","Cu2WS4","SrFeO2","CsNaTe","CoF2","KSc2F7","H2S","K2PdCl6","Rb2PtI6","CaCl2","TlInS2","ZnPdF6","LiZnP","Rb2SiAs2","K2MnS2","LiAlSi","ZnO","Ca2NCl","GeF4","FeF3","RuS2","SrSe","B2O3","Ba2H6Os","BaSnF6","RbScO2","TlF","K4ZnP2","Rb4I2O","NaHS","Co(AsO3)2","LiAlO2","LaCl3","NaCaAs","K2SiAs2","AgPF6","SF6","K2PtF6","Li3N","NbCu3S4","BaSe","GeF2","HgO","Ga2Se3","SrSeO3","BiOF","MnCO3","K4ZnAs2","CoSb3","Ca(SbO3)2","Mg2NF","SiC","CsCu3O2","K2Sn2O3","Ga2Te3","NaSbF6","GaS","KAlF4","Ca2Ge","K2PtS2","NaYS2","Rb2PdF6","ZnS","NaSrP","Tl3VS4","AlPO4","CuBr","KMnF3","AgI","Al2Se3","K2PtCl6","BN","HgO2","RuSe2","Sr(MgAs)2","Al2HgTe4","K2TiF6","RbSe","KZnP","RbHgF3","NaBeAs","AsS","B6O","BeCN2","CsPbF3","CsNaSe","Na2PtS2","Na4I2O","RbAu3Se2","ClF","RhBr3","Ba(MgBi)2","H4NCl","K2AgP","BiOF","BaLiAs","CoO","La2SO2","Ga2TeSe2","MgSe","BaH2","CsCaBr3","KNO3","Rb2Te","NiPtF6","Cu2HgI4","CsNiCl3","BaTeO3","K3IO","RbS","Ba(AgS)2","CdPtF6","KP","MgH2","RbSb2","Tl2TeCl6","LiZnSb","MoF6","Rb2S3","Ga2S3","Rb2PtF6","AlCuO2","Ca2BrN","Rb2PbCl6","Sc4C3","AlAgO2","MgI2","CaCd3O4","VCu3S4","K2NiP2","NaHF2","LaN","YCl3","Li3Bi","LiAsF6","Mg(AlSe2)2","MgVO3","CrCuO2","Cd(InSe2)2","KTe","CsNaS","Sn3N4","Sr(CdAs)2","GaSe","Sc2CCl2","NbCu3Se4","LiMgN","SrTe","CsBeH3","RbCl","GaCuS2","HfSe3","MgTe","CaBr2","K2ReCl6","ScAgO2","NaMnO2","ZnS","CdI2","RbLiBr2","SrMg2N2","Cs2Se3","Rb2GeF6","K2O","Rb2SeCl6","LiPF6","TaTl3S4","La(NO2)3","K2PdF6","Ca4P2O","NaSe","InF3","Na4CdP2","InGaO3","RbF","RbYTe2","AlFeF5","ZnSiP2","LaIO","CdTe","CaMg2N2","Rb2MnTe2","MgCrF6","HfSnPd","CaHI","RbNaS","HgAsO3","K2H4Pd","Sr2MgH6","Zn(GaSe2)2","Rb2CaH4","CrCl3","NaMgAs","NaAlSe2","LiPN2","FeSi","LiYS2","ICl3","SiS2","RbAuS","BaMnO3","YCuO2","Ba(CdP)2","Cs2CaH4","Rb2MnCl4","Y2SeO2","KYTe2","CaHCl","Cs2GeCl6","PCl3","K2SnCl6","ZnPbF6","GeO2","AuI","Cs2GeF6","MnF2","TaTl3Se4","LiNbS2","CsCdBr3","MgGeP2","Li5NCl2","Ca3AsN","Cd(InSe2)2","Na2CN2","CsNiF3","RbGeCl3","Ca3PN","BaTiO3","Li2VF6","SnO2","CdP2","SrLiN","AlAsO4","WCl6","Al4C3","NaRhO2","BaSiF6","ZrS2","CsNbN2","NaLiS","Na2H4Pt","RhF3","BeF2","RbLaSe2","HfSiRu2","CsSnI3","BaAgP","ZrO2","SiO2","Ni3TeO6","TlClO4","Ca(CdAs)2","SiO2","Al2Te5","MgS","K2AgAs","Rb3BrO","KLiSe","K3BrO","SiSe2","Sr2PdO3","Ca3CdO4","Rb2SiF6","K3Cu3P2","MgMoN2","PI2","K3Cu3As2","SiC","CaTiF6","Ca(ZnAs)2","Rb2CoF6","Hg(AsO3)2","KAuS","RbNO3","NaMnCl3","La2TeO2","K3SbS4","S(ClO)2","CdPS3","HCl","KNaO","SiC","SrS","Na2AgAs","Cs2TeI6","AlH3","PdSe2","RbCaAs","SBr","K3As","Na2S","FeF2","Rb2PtCl6","TiCoSb","Al2HgSe4","BaN6","BrF3","ZnS","NaSb","TiFe2Si","SrCN2","Ni(HO)2","Li5Br2N","P2Pt","Rb2Se3","InCuO2","CClF3","MgAs4","Rb2MnS2","BBr3","InAgS2","Bi2SO2","NaLi2Bi","RbSbO2","ReSe2","Y2SO2","Na2O","Li3P","NaN3","CdBr2","MoS2","K2MnF6","SiO2","K2MgF4","CsAlO2","Mg3NF3","Na2H6Pt","YAgO2","YSF","Na3Sb","MgCl2","K2MnTe2","NaPN2","Sr(ZnAs)2","CsYO2","KPF6","Mg(BeN)2","ScAgSe2","MgGeO3","TeF4","ScCuO2","LiVO2","KNbSe2","NaNbSe2","Sr(AlTe2)2","Cd(GaTe2)2","Rb2GeF6","NaAlTe2","Al2O3","HgO","La2SeO2","Na2TlSb","MnSnO3","PdPtF6","Na4HgP2","SrTiO3","Sr2AsAu","KAgSe","TiNCl","AlTlF4","Rb2O","Ca2NF","NaI","K2S","Na2O2","RbTe","CsSbF6","NiCO3","BeCl2","SnO","ZnTe","CO2","LiCuO2","GaSe","LaSF","KLi2As","TlF","TaCu3S4","Rb2TeCl6","ScAuO2","CsVBr3","Al2ZnTe4","K2MgCl4","TiO2","Rb2MnCl6","ZnS","SiF4","LaHBr2","K2SiF6","GaF3","SbO2F","K2ZnF4","RbLiSe","ZnSe","RbGaO2","BeS","GaP","Sr2Si","TeO3","Na2AsAu","Ca2AsI","Sr(MgSb)2","NaZnAs","Rb2TeBr6","Rb2PtC2","SiO2","Ni(AsO3)2","KAs","Na4IrO4","KAuO2","MnPS3","K2O2","Ba(MgSb)2","Ca2Si","CaSnF6","CsCaF3","Rb2SnI6","AlCuS2","YN","RbH","Rb2P3","TiSnPt","ZrSe2","LiFeF4","YP5","ZnCl2","KNa2Sb","RbCaF3","Ga2HgSe4","BrF5","Li3As","K2CuAs","NbFeSb","Rb2HgO2","BiF3","Cr2F5","Na2CuP","BiTeI","SiC","RbVF3","LiCrS2","Mn3O4","BaO2","CaH2","SrP","InBO3","CaS","CsMnBr3","Na2Se","H3N","Ca2SnS4","MnBr2","RbLaS2","BN","Li3N","CdPdF6","Ca(ZnP)2","RbLiS","HfCl4","K2P3","ScSnAu","KNbO3","BaS2","KZnAs","RbAuSe","HgS","IF7","CuP2","TaCu3Te4","PtO2","KZnSb","HfVF6","Sb2Ir","K4CdP2","CsCdCl3","WO2","RbS","LiAsO3","Ba3P4","FeAgO2","LiSbF6","CdO2","CaPdF6","GaCuO2","NaNO2","BaTe2","SrHI","InAgO2","AsCl5","Sr2ZnN2","Ta3N5","HfO2","Cs2HfF6","BaHI","NO2","Rb2TiCl6","BaP8","NaZnP","K2MnSe2","ClF3","HgIBr","Al2CdS4","Na4Br2O","Sr2H6Ru","ZnS","K2PdO2","PtF4","TlSbF6","B6As","BaHfN2","MnP4","Li3LaSb2","BeO","GaAgO2","CsTaN2","YBr3","BiCl3","MgH2","Ca3BN3","RbAsF6","CrCdF6","LiYSe2","Sr(CdP)2","Ba(CdAs)2","Tl3SbS3","BI3","Li2O2","RbMgF3","Nb(SCl)2","AlAs","TaCu3Se4","FeAs2","NiF2","Ca3AsBr3","MnO","ZnS","PNF2","LiAlTe2","CrSbO4","BN","K3MoF6","FeS2","CuI","RbAu","Nb(SeCl)2","K4HgP2","KTaO3","ZnCrF6","MgTe","BaLiH3","CuRhO2","NaN3","YAgSe2","VCl2","V2O5","TiTl2F6","KCuTe","Si4P4Ru","Sr3Fe2O5","NaS","SeF4","SrBrF","RbAlO2","Ge2N2O","ScNiSb","KCuSe","Al2ZnSe4","ZnSnF6","CaSnF6","Ca3PCl3","Cs2PtI6","WS2","CaClF","Ba(SbO3)2","K3WF6","CsCdF3","ZnF2","CsAsF6","CdSe","RbTlO2","GaCuO2","BaSnO3","Cr2O3","AuCl","KMnF3","RbCdF3","PbBr2","CsMgBr3","LiBO2","CrCl3","Cd(AsO3)2","RbPS3","Tl2SiF6","KNiF3","SrFeO3"],"legendgroup":"","marker":{"color":"#636efa","symbol":"circle"},"mode":"markers","name":"","orientation":"v","showlegend":false,"x":[0.18,2.97,3.85,1.51,2.9,1.84,2.46,3.23,1.14,3.01,4.45,1.27,0.67,1.07,0.39,2.36,1.58,4.65,0.15,3.39,3.15,0.87,1.51,4.25,1.82,0.18,2.02,0.37,0.76,1.66,2.62,4.71,2.14,2.67,1.25,5.23,0.95,2.59,0.98,0.57,5.73,0.65,3.25,1.42,1.02,2.82,0.39,7.01,0.31,1.24,2.13,0.87,0.98,0.61,0.76,0.62,0.34,0.2,4.44,1.22,0.91,1.48,1.87,1.83,0.51,0.64,3.29,5.34,2.72,2.27,2.07,1.49,5.62,2.75,1.81,0.26,7.6,2.43,0.66,0.98,0.12,0.15,1.05,1.53,4.84,4.07,0.86,0.19,2.11,1.05,1.89,0.63,0.3,0.35,4.26,3.26,0.97,1.7,0.7,1.28,1.81,1.09,0.14,1.02,1.57,2.48,5.8,2.8,1.96,0.7,1.55,4.39,1.38,1.35,3.07,2.17,1.93,2.23,1.4,2.08,0.26,0.22,3.62,2.91,2.25,0.37,2.21,1.87,2.06,2.08,0.36,2.37,2.5,2.92,1.52,4.81,1.37,4.07,0.76,2.01,0.83,1.62,1.87,2.1,0.66,1.35,0.62,2.73,4.31,1.73,1.89,1.16,2.42,1.57,4.03,2.8,2.32,3.99,4.9,2.7,0.59,2.84,0.4,0.46,1.0,5.36,4.09,1.69,0.71,1.26,2.57,1.34,5.35,0.93,2.86,1.59,0.8,0.7,3.66,2.2,7.13,7.26,0.56,4.18,6.07,0.89,0.41,1.99,1.14,1.89,3.74,1.85,0.86,1.17,4.22,5.26,1.17,2.01,1.55,0.4,1.97,3.07,5.71,4.09,1.2,0.51,5.39,0.47,1.59,1.34,0.96,0.97,0.11,0.63,2.37,5.5,3.11,0.67,2.23,6.3,1.97,4.99,3.45,3.01,0.95,0.85,3.15,1.98,6.12,3.65,1.58,1.0,3.24,5.78,2.57,1.22,1.66,1.95,4.06,1.31,1.04,3.7,2.64,3.46,0.73,0.17,2.69,2.13,2.3,1.46,1.23,0.64,4.89,1.86,6.79,0.31,1.23,2.28,2.26,2.04,1.24,1.95,5.66,0.99,2.78,1.37,1.8,1.85,4.42,0.29,0.31,1.35,1.11,4.73,0.91,0.84,0.65,1.28,2.02,1.85,3.85,2.92,2.03,1.14,2.21,1.73,2.05,1.26,0.4,4.93,1.23,3.12,0.6,0.71,3.06,1.61,2.55,2.87,4.39,2.96,1.88,2.04,0.3,0.82,2.71,1.03,1.7,0.88,2.19,1.03,3.71,0.27,2.57,0.41,4.25,1.32,1.7,2.64,1.81,2.43,1.25,0.33,1.41,3.62,0.19,1.03,0.64,6.81,1.12,4.93,0.34,5.14,1.05,2.69,1.67,0.87,0.2,2.41,0.23,0.14,1.22,0.88,1.36,2.27,1.76,3.22,4.84,0.71,0.32,2.36,4.53,1.08,2.12,1.25,2.08,2.37,4.32,1.69,0.74,5.97,1.71,2.61,7.54,2.53,2.2,2.04,1.27,0.48,4.02,0.74,1.34,5.52,1.36,4.38,1.36,3.29,0.62,2.0,0.96,1.53,0.38,3.53,2.29,1.24,2.65,2.73,1.4,3.3,1.52,0.95,2.15,3.8,0.18,1.92,1.77,3.07,1.99,1.92,2.63,0.68,3.01,1.29,2.16,1.3,3.84,2.21,4.03,2.46,1.96,3.28,2.09,6.03,2.87,2.25,0.71,2.9,1.5,1.94,0.72,0.95,3.04,5.36,3.76,0.8,1.73,1.93,0.81,1.49,0.26,4.25,1.92,1.32,1.38,7.42,1.05,1.52,3.05,2.11,0.86,8.09,2.32,0.17,0.46,0.12,3.47,5.66,1.69,4.57,0.22,5.44,1.04,2.76,1.07,0.41,2.52,0.89,2.17,0.23,2.52,6.99,1.29,0.74,1.93,1.28,1.75,4.61,0.39,1.18,0.71,2.1,3.09,2.28,2.03,2.13,3.65,1.75,5.82,2.13,1.95,2.5,0.73,1.39,2.2,0.51,1.3,2.23,0.11,2.44,3.24,1.94,1.05,1.43,3.82,2.16,2.06,0.6,0.4,3.21,3.13,2.08,1.02,0.67,0.24,6.61,0.81,1.11,3.83,0.38,0.82,0.33,2.25,1.14,2.99,1.87,0.7,3.94,2.88,1.23,3.27,5.5,6.41,4.27,3.58,3.61,2.42,1.31,0.4,5.62,0.85,4.68,0.26,2.85,7.02,4.07,0.68,3.65,4.02,2.33,1.79,0.69,0.5,1.45,1.04,5.8,1.28,4.46,1.19,2.41,0.38,0.88,0.77,0.88,1.85,0.5,0.48,0.56,4.25,1.32,1.69,3.53,2.32,1.74,0.43,5.09,3.4,6.33,0.54,1.1,6.63,0.38,1.24,1.48,0.69,2.99,1.92,2.64,1.76,0.65,1.63,4.77,2.68,1.2,2.07,7.72,3.6,7.22,4.71,1.43,4.3,2.31,1.2,2.47,3.14,1.3,0.35,1.15,0.42,1.56,0.98,0.36,2.05,1.14,5.51,2.24,0.67,0.43,1.07,0.15,2.34,0.85,0.29,5.38,6.9,0.12,1.69,0.15,2.92,0.76,0.79,0.33,3.14,0.13,4.05,0.67,6.4,0.92,3.44,0.64,1.07,0.51,2.02,4.68,1.47,0.66,1.27,2.22,2.45,0.65,0.69,2.23,3.03,0.46,2.65,2.38,1.29,2.02,4.33,1.08,1.6,2.68,4.16,0.98,1.78,0.88,2.75,4.16,0.71,0.12,1.42,1.58,0.28,1.73,1.69,1.47,0.86,1.14,1.6,0.45,3.22,0.49,0.82,1.75,1.24,1.56,3.39,0.48,1.13,4.93,1.25,2.11,0.78,2.42,0.34,3.59,0.24,1.44,0.74,1.21,4.02,7.23,2.82,2.69,2.15,0.89,0.91,0.99,2.58,2.35,2.73,1.98,2.23,2.05,1.37,1.38,4.33,2.65,1.25,0.43,0.2,6.85,0.58,2.15,3.98,3.35,3.63,0.57,5.07,1.66,1.52,0.71,0.16,1.59,2.68,1.97,6.94,1.51,1.69,1.6,0.28,4.8,1.67,1.68,2.03,5.62,2.44,0.86,4.48,3.35,0.46,1.63,0.37,0.98,0.94,2.1,1.55,2.32,2.21,0.96,4.02,0.44,1.25,2.16,3.87,0.6,1.46,0.86,1.23,4.14,5.0,3.37,2.6,0.27,0.18,2.15,3.71,5.41,1.84,0.65,1.56,5.67,2.86,2.62,3.29,3.48,5.22,0.51,0.85,0.98,0.37,2.44,1.87,2.66,3.17,2.57,4.04,7.28,1.41,1.93,1.83,4.98,4.55,0.33],"xaxis":"x","y":[0.45993813324708904,1.092818877373803,2.3112440504647895,1.4915919182656563,2.201649258139068,1.3289384161777664,2.435866746360197,1.999417155441973,1.2675443985674772,2.4293567766879427,1.3668481279259794,1.0217448872138473,0.15315020151458344,0.3859347639615614,1.2766758250730805,2.185555642054974,1.6287091802613478,2.1812018290375144,1.2710551403703954,1.1963000003976483,2.1943011440683313,1.466852873717497,1.6308478862973892,1.5829325393844906,1.2710076246299706,1.0665799578865733,1.184824886275645,2.0919066115296387,1.278778648598998,1.4435090012775145,2.248704375097454,1.5459645560374884,1.2623632917466396,0.6972302345749126,1.1796482350825472,1.640428066593514,1.146422084216687,1.9085516370711846,1.1054294954375556,1.2983110042195822,1.8548140638544233,1.2035959776872094,2.232930712850515,2.2634358588568264,0.8495383643305137,2.5678706227679693,0.7096228617715906,2.4819905434345313,1.5803909126994287,0.7317034757144789,2.2109006539933755,0.7785740987965237,0.6566173945347296,1.1829634360344685,1.6706161217593196,0.7691008835391645,1.1200286309056693,1.0829151169767777,2.2002566832668666,1.0738249772295003,1.9975587996118844,1.9209315977261834,1.9577086337611387,2.205138390662105,0.8465205324818343,1.5768343605728428,2.033809980289636,2.310237452132435,2.312146354645548,1.2990224501203265,2.0549055618173955,1.2034271978401467,1.8548140638544233,1.8575292256166862,0.9222473999518493,0.679970127055581,2.310480559433735,1.979656915636895,0.9831749325792277,1.0445751984220555,0.9885209051112396,0.452608392155295,1.1494471741556753,1.5991740231222995,2.070599532057404,1.8550168918002188,2.010699471427332,0.7694432708180151,1.3199671307268144,0.5542251713654378,1.76907246552726,0.9376387383686047,0.2786312926514738,1.0947125501638835,1.9263602631047634,2.232930712850515,2.251157555411584,0.7881556670377248,1.2508088835297382,1.6559407975656362,0.796073816233357,1.8890678489543975,0.8824139365496504,0.9781044981077706,2.2606774776799825,0.09560651587408801,2.3857244797133514,2.5678706227679693,1.2034738258603233,1.0191218077830477,0.5391222099008095,1.135521331935432,1.6602505608372051,1.2162897676797,2.3683127465327463,0.45983840757999433,2.0227498152527366,1.8804834445565892,1.5091199875683445,0.8153799943807095,0.6925403673220493,0.41974741346095856,1.907447486911,1.8186755795289458,1.66468828426363,0.6440930622071449,1.2985487897130414,2.185543734317023,1.1395941189380658,2.1542890148890934,0.06815621792287475,1.1803749487278823,1.0168521892757851,1.399394694449089,1.5093211940422386,1.8133096338026626,0.04299838682786788,0.9755159882632287,1.4539982827432243,0.04299838682786788,1.047412942179316,0.6547101378171383,2.197253811174252,1.5651723191319427,2.573749884630646,1.162723974353171,0.33079089793084915,2.062763192104035,1.8009063800058192,1.6825944541379647,1.3524357292288314,1.1213902858481788,1.1803749487278823,1.3387146059573938,1.907447486911,1.8096131453169653,1.3971253675318633,1.7594275896703477,2.4093689295533376,2.1529469582478544,1.37742144481887,2.046281514117866,0.9405193113729114,0.7163489241032829,1.8890678489543975,2.2080608916244135,2.299798233870267,1.039149535771301,2.1558456697873107,1.642291289981078,2.2446108923285015,2.3625209783291723,1.662690648127318,1.0915347412412273,1.4878131333878035,0.917160304325754,1.320326817990925,1.1678270474948589,2.521444300711059,2.0571531272422146,2.2861510985617093,2.2238841395436895,1.5008475430047574,2.5680057708708524,2.0579074068053305,0.38302673107322216,2.0779738000231998,2.151654198614031,1.0706247564890257,1.3487390000092034,1.7532090385643124,0.04299838682786788,1.304274737259342,0.0762706724684902,2.3080640014427805,1.832427011121036,1.5089621454314526,1.4620871381587377,0.8576197354624594,1.5927406830745856,1.3141033046685373,1.798811196533021,2.174970375945377,2.5784758630218363,1.892756402397513,1.271030683313168,1.662690648127318,1.1371719377133154,2.2647419284700607,1.3056701868996696,0.9920887063262407,1.2749010406911157,0.7658969301112944,2.003535130060923,0.8311466006680435,2.2988771127663776,2.046281514117866,0.8025739720676516,0.8302501778034955,1.4224526149494676,2.13511708172941,2.283493805870122,1.8909847001471929,1.9364996609239518,1.4218811518988208,1.6904471890302195,2.309433414248455,2.045113568124591,2.101337961437353,1.677328318705561,0.9041550054059075,0.960219920695942,2.3696083418549363,2.5431117517214665,2.2451856237242245,1.5538524252515504,0.8828349589125105,0.8220557955465999,1.992519118972849,2.1843699527937455,1.2111918198681855,2.1214882176339613,2.106858330049171,1.4557027408041983,1.1921265708991022,0.38654131638125605,2.05921877706133,1.0543104527917673,0.04299838682786788,0.6130890274442454,2.1089919962031103,0.913531040423496,2.340310989750124,1.4620871381587377,2.3513358592204243,0.28080431117425314,1.1351104204837144,1.0714062367008619,2.3655210950269585,1.1395941189380658,1.2330087493971382,1.0913437242534612,2.36327639242609,1.1007522162038745,2.153424922770919,0.9124982931707062,0.9052608747077547,1.8053945647449288,1.135521331935432,2.2457617926447226,0.6603802294196509,0.39304021528490046,0.8058613757353984,2.4336802213336823,1.3741511669940853,1.3537720079267437,2.2133475670427423,0.8281289815578505,0.9857286580820859,0.11552561731254934,1.1414835702844057,2.1320898111307973,1.3747698194922595,1.0744646308266521,1.5759536134607246,0.4562960007997883,2.4521739566079197,1.259226382579807,0.7156757855022058,2.7315423088106034,1.2552270350991246,2.106858330049171,0.794635222605895,1.37742144481887,1.68516967349792,1.317959453215616,0.8723532937938024,2.1559359711981485,1.4643874801029775,2.488074800327758,1.3197180119825007,1.9108974277084203,1.1301299878923239,1.6557186370112638,1.9856334513639677,1.6736413618919597,1.4261769608249022,0.8739004437032645,2.178991586864282,1.4780194918268803,2.330232840805021,0.7155760880096909,1.6903509523559601,0.9142934531332705,2.3292968864965866,1.3458314552717638,1.3696888973499473,2.256338386884621,1.751082214275552,0.7954838463421129,1.780333022055119,0.0392492670277913,1.7340660717873078,1.1062093534913766,2.016254873397835,0.8995267518187371,1.3169355038292487,2.5559383739966415,1.590853660312216,1.6032689009931125,1.0139598777973533,2.376902074603257,0.8960326433894003,1.8390540566663105,1.4378590918114764,1.0462426631142387,1.1893040023371697,1.4037356617800634,2.1099980098919096,0.655822732678355,1.4015686669745542,0.829993305431785,0.7383666547059492,1.8866721600046832,0.5515913505354244,2.220687864010612,1.858875724134389,1.2046744956298963,0.7538779922565126,0.5767924633980833,1.3668481279259794,1.836246865915346,1.50841821800671,1.9658351539558605,1.1395941189380658,1.1803749487278823,1.5583898914985126,1.646391651767399,1.1770088588692402,2.3806157422160585,1.8259638472749624,1.9026755402850404,2.4810906183101498,1.0860664847665633,2.4539445427817816,2.353828657103149,0.7474972310199804,1.249361721942806,2.3382036100258294,1.3321341617595182,2.266600743760713,2.269924572465565,0.7515273924133355,2.1684439202343606,1.1404026519397368,1.735726186282771,0.7691008835391645,1.6821867771056427,1.124421419310644,2.2690627654592364,0.42028307573280604,1.889219489846507,1.4171948830885064,2.0849805736737443,2.3551904209304126,2.2231739744723336,1.1820108279115762,2.4339248716580504,1.563118519391613,0.9567133328187762,1.060394749369306,2.260656237042234,0.08593284954484125,1.0408612523167202,1.8602740072348634,0.999840550536926,1.098859979689414,1.8152467611881327,1.4842485362980409,1.2093375649043772,2.377692870258605,1.8295137401188195,1.4519796100158786,0.7373959465427408,2.1184415286898584,1.8688743325800004,1.9732668982971295,1.8589356024162176,2.1756404130386255,1.9877432824488492,0.8467394366100701,2.3241289555165134,1.8936066036864654,0.9083410993750728,0.9263962360519384,1.52181015317264,1.1401714559763254,1.5666892572441147,0.626997987407834,1.0462426631142387,1.7059780221779062,2.044085411395336,1.7623136019392183,0.7375903406857555,1.759542067949009,2.3765226462913627,2.2275786377048123,1.3528857444935196,1.7766151118829543,2.0831193299547497,1.7183596066213789,0.18634970304121903,1.75608283263029,2.1498279285174977,0.8869737273212178,1.6273010879454446,1.310161429023441,2.2122343666684294,1.894180312409987,1.9160764224689193,1.0411681068627316,0.02706880479548619,1.2943380474675865,0.9523503734510088,1.641814087908463,1.8548140638544233,1.7236078971777526,2.2297772514094705,0.6497794740684348,1.8548140638544233,0.5992311757762664,1.0704597606729667,1.038368285120649,1.788915261095749,1.3084667029139587,1.7468819494838652,0.8016212912347798,1.6704077848975032,1.7871665502856338,2.390245085788301,1.1261718754542027,1.4132705843246836,1.3060158631890082,0.92576307954069,0.04299838682786788,2.226576538366725,0.5667669714925264,2.3918889480468337,2.071413489695459,1.0589453285822394,2.4293567766879427,1.733221554976798,1.583960473016571,1.2854946683715858,2.3820142142548257,1.2830528220021156,2.6215747061560752,2.1912337317149833,0.04299838682786788,0.9926963479955044,0.9797693566000522,1.311717041201582,2.4927872342514137,0.7678546236833628,0.9833361995153176,1.548064055744644,1.2812041349833225,1.3343518628186546,1.7866598173740968,1.8143627042960222,0.26760455685594914,1.0604646711977799,2.3233891095556265,2.4312535348411095,1.1395941189380658,1.0563277412074976,0.07563961084299611,1.2333149041168008,2.3741611687017983,1.4956330367268902,0.9712728861370206,1.196194054731237,1.9127076469310955,1.8931319512148737,0.34052015047823014,1.302727343067363,1.2584575191106937,1.1041119165867659,1.9177672885982515,1.082397905670187,2.067625810279481,0.5324761906527575,1.4806785721590923,1.7693051187441355,1.2596514196490303,2.4324758376051254,1.4878131333878035,0.7602219788904062,2.4155083331157963,1.8548140638544233,2.3242521884952243,2.052754617498984,2.003896878253928,2.397954839914084,1.511139817210591,1.585687378827685,1.1950859253607102,1.7313346838039079,1.0819687022930922,2.283268939019908,0.5680324496421519,1.8499640735979592,2.471228008176862,1.459268950465286,0.7175754295523978,1.9522907906238487,2.311978133826008,1.5025142531813311,1.7845224869556922,0.8690985332163124,0.8458774221425619,0.5813254993278663,0.888802691359405,2.3806157422160585,0.796366358164686,2.0398122659470665,2.1843699527937455,1.652507202672745,1.0884517800764923,2.0101732546322815,1.888886347667978,1.3592764982494123,1.7919370260679524,0.2920447503492701,1.0987463811042726,1.6618898883077131,2.067600021681537,1.8308676690088557,0.8587496582826184,1.2633831184934985,1.4161531085989743,2.296934327698762,1.2387272253005956,2.344655538332311,1.3975040308077087,1.5267857388430044,2.0779738000231998,0.6511043304711309,1.224925101355366,1.9568752125390705,1.4015686669745542,1.7383874426646275,1.121738300607764,1.9364996609239518,0.8388671697110651,1.8624378182680297,1.4021965067937778,1.3533152665772332,0.6117448880625332,1.8885491801648608,1.7449122885288793,1.9193007754097902,1.1395941189380658,2.2749322385706763,1.706786816660732,2.4402518638429855,2.4341102894343836,2.197013958000788,2.3017573156235573,1.3529054408801626,0.9459735808541895,2.269953384667136,0.8555672516477406,1.4990954393806242,0.2858550018646889,2.235820953259072,0.921225527805755,0.49605995500084626,0.4212288446741133,1.027234224573382,1.5651723191319427,0.40292882316050366,1.8548140638544233,2.0444193557121353,1.0760533703352595,2.09962689177115,1.872183354619968,1.2370696710687696,2.3042168785679022,0.41916074775145495,0.2602924932819205,2.305979578749825,2.1387574988016036,1.3028032520579491,0.9960010000447486,1.321498373729644,2.4267351947125104,1.4568793466970702,0.44078959728369665,0.7298266999969627,2.203203631507923,1.3582865623709945,1.7820968763669682,1.2278935429764928,2.191229207951689,1.193200128830526,2.4714282637340133,1.0227365855451815,1.0419775448566504,0.22510248794267468,2.1052796364150312,2.189112214703008,1.8284226174803804,1.2191110318454836,1.0475045327528685,0.04299838682786788,2.025026832025652,1.0147951467190601,1.6601396233627945,1.999561377058649,2.2240804493145427,1.1194894226465693,1.9214955045019477,0.996121218765388,1.42133796610088,1.273340428195829,2.7876129773654403,1.0848029146651836,1.2620885585217827,1.1737389957323052,1.135521331935432,1.5538524252515504,2.283129060890821,1.203109345495299,1.3915025901112625,1.561476852488901,1.4806548312136085,0.5549170631353787,1.9209315977261834,1.0802431412174232,1.0829151169767777,1.063592420378674,1.5272508904530393,2.426503094011628,1.1955133050977251,0.47654377563664546,1.5768343605728428,1.0947125501638835,1.8258280406354577,0.2871144212725901,1.3882085819389651,1.8003357849336004,1.1448369478639384,1.4261769608249022,2.14611495428042,1.1596616397261026,1.5089621454314526,2.3179738187384693,2.196372161001111,2.1566521647163914,2.01950130762722,2.4666601692581196,0.5827939593414982,1.9136131437116644,1.9411534121129532,1.8886978873075904,1.6782117264027978,1.0800555310578432,1.4519417421238738,2.2912726104434813,1.9214770187993664,2.572813375135155,1.926187649984849,1.4175120263008727,1.3394924688144016,1.2097694671234722,2.5201700911267197,1.5493412400665223,1.106175862606077,1.6671728898206337,2.2070037115309997,1.1395941189380658,1.9371675271274602,2.020529745194124,2.182981128408754,0.05477476819154122,1.3899547695215067,1.3497880240017377,0.8983317838599628,1.5176164869970703,2.006724671471115,1.4850393880080486,1.3376069364621674,1.744328900549169,2.330232840805021,1.569874341083236,2.402034143801114,2.2796132411309062,0.8903019403516531,1.2216081701128512,0.6528621857964721,1.0780167185456175,0.9714918608281378,2.239628438830948,2.2225235664842256,1.4838662721920117,0.3920102057414893,0.7015938138711486,0.26091601593202274,1.8133096338026626,1.1371331293984084,1.5068409328926984,1.1395941189380658,2.477088078894898,0.7460135787186505,1.945822018451407,1.135521331935432,2.4103247140186816,0.9629116591671147,0.873907497786325,0.9602840410570874,1.426902227506183,1.411084106623111,1.758051152219473,2.313197766594162,0.5767924633980833,2.2446503334591585,1.3972751368614162,2.4324758376051254,0.7188701319727748,1.338606103943802,1.8241613562623018,2.1239680936995904,0.9884631369871775,0.8341574554143051,1.6498841549395167,1.3307534342302814,2.4155057103369866,1.9105846200871963,2.1020577258890643,1.8348709698310364,0.2778075896348133,1.089721179104125,0.9237647751526132,2.3102478154640713,2.305979578749825,1.5006854047842977,1.2816149743188172,0.6184867716146303,1.993670913697326,2.0395637883940996,2.330622356063933,2.222624080766875,2.21621265790631,2.342744461744961,0.9613500872099477,2.0543290311620126,2.01950130762722,2.067314519611975,1.4564424918741372,1.2186562070582068,2.153424922770919,2.2434525744630016,1.4100014560912395,1.485301342818297,1.783643858346375,1.563118519391613,2.0959013325322973,1.3446251380202499,2.119394028800605,2.1160373875273515,1.8092251071186012],"yaxis":"y","type":"scatter"},{"hovertemplate":"<b>%{hovertext}</b><br><br>band_gap=%{x}<br>band_gap_predicted=%{y}<extra></extra>","hovertext":["As2O3","NaBr","KLiS","TlF","Sc2S3","WBr6","K3P","Ca(CdP)2","Li2NiO2","InSe","SO3","AlCuO2","RbBr","Rb2SnCl6","Zn(InSe2)2","ZnS","CdP4","K2ReF6","CsGaS2","RbMnBr3","CsK2Bi","MgCN2","CsS","Rb2NiO2","Rb2PtSe2","PtS2","K2AgSb","Rb2SnBr6","Sb2Se3","Cs2PtBr6","K2S3","NbCl4","Ag2S","BaTiO3","HfNCl","CdCl2","LiZnAs","NaBiO3","TiBrN","TiS3","ScCuS2","Mg2FeH6","GeO2","Sr(ZnP)2","CsCaH3","Li3LaP2","Ga2S3","CdBr2","K2Se","NbSbRu","Rb2O","Zn(GaTe2)2","IrBr3","P2Pd","LiZnN","H4BrN","Al2CdSe4","RbLiCl2","BaNaP","Ge2Te5As2","Na2PtSe2","BaLiSb","Te2Mo","FeCuO2","NiPbF6","Rb3AuO","NaCuO2","K3Ag3As2","Ba3SbN","Ti(CuS)4","SiSe2","Rb2PdBr6","ZnSnP2","K2HgO2","YCuO2","BaTiO3","AuSe","Sc2SO2","Cs2PdI6","VBO3","OsCl4","SiC","LiN3","K2MnCl6","K2As2Pd","SrTiN2","KH","LiBC","FeS2","RbN3","SiH4","CsBiF6","Ba(GaTe2)2","Rb2As3","NaH","Ca(CdSb)2","HgCl2","SrAgP","Mg2H6Ru","TlF3","NaSnP","MnF2","Rb2S","As4S5","FeF3","Mn(AsO3)2","Zn2GeSe4","K2SiP2","Tl2SnF6","CsVCl3","RbAuO2","KNbS2","AlCuTe2","CaHgO2","AgAsF6","K2P2Pd","Tl2SnCl6","BaS3","RbVBr3","ScSbPd","FeP2","KCrO2","Ag2Se","Rb2MnF6","LiYSe2","MoF3","KBrO3","Cd(InSe2)2","GaAgS2","MnI2","Sr(SbO3)2","BiBrO","KTlO","Ca(MgAs)2","LiAgF2","AlAgSe2","Ca(MgSb)2","LiInTe2","CaP","Li2CuSb","RbNiBr3","SrClF","Ba2SbAu","BaSe3","K4Br2O","K2Te2Pt","VCu3Se4","LaOF","Na3VO4","RbAlF4","AlAgS2","KAlTe2","PtO2","As2PbO6","HfS3","BeBr2","KN3","CsBr2F","Ag2HgI4","KCrS2","Rb2H6Pt","K2ReBr6","LiMgBi","NaS","BaNaBi","K2ZnTe2","CdSiP2","RbI","K4BeAs2","GaS","CaPtF6","RbSbF6","BaHgO2","KSnSb","PdS2","BeSiN2","Cd(PtO2)3","KMgF3","LiMgP","ScSbPt","Rb2Se","CaCrF6","Cd(SbO3)2","BaS","Rb2PdCl6","BiTeCl","WSe2","K2NiF6","RbCaSb","As2Ir","RbTeAu","NaSrAs","ZnF2","KAsF6","K2SeBr6","Sr(GaTe2)2","Rb2NiF6","FeSe2","PtSe2","CuBS2","MgCl2","YNiBi","KAuF6","CaPbF6","CrBO3","Hg(SbO3)2","InCuO2","BeTe","Ca2IN","RbMnF3","LiMgH3","TeO3","Li4NCl","K2TiCl6","ZnCl2","P3N5","LiBiF6","Li3VS4","K2CN2","Si2N2O","Cs2PtCl6","PbCl2","Mg(PtO2)3","K2PAu","Cs2PtC2","AsF5","LiMgAs","CaCN2","SnCl2","KLiTe","HgPS3","Li2CN2","SiO2","BPS4","LiInSe2","MgTe2","MnSnF6","KZnF3","Na2HgO2","Sc2S3","Rb2NiF4","ZnS","RbCaH3","CsAu3S2","KAuSe","CsPbF3","K2PtBr6","MgBr2","Cs2SnBr6","InBr3","RbNiCl3","PF5","MoBr3","NaInO2","AgI","SrHCl","NaMgSb","NaLi2Sb","BaI2","Ga2HgTe4","Li3Sb","BeF2","Rb2MgF4","MoSe2"],"legendgroup":"","marker":{"color":"red","symbol":"circle"},"mode":"markers","name":"","orientation":"v","showlegend":false,"x":[4.01,4.09,3.06,3.2,0.93,1.07,0.21,0.82,3.71,0.54,5.14,1.8,4.19,2.54,0.99,2.04,0.65,1.7,3.05,1.18,0.3,3.76,1.71,2.78,1.0,1.54,1.19,1.31,0.76,1.43,1.29,1.08,1.3,1.73,2.21,3.52,0.55,1.09,0.56,0.23,0.87,1.91,3.25,0.83,3.15,0.61,1.81,2.94,2.09,0.37,0.45,1.02,1.56,0.46,0.51,4.05,2.0,5.15,0.86,0.41,0.86,0.69,0.97,0.81,2.23,0.21,0.49,1.25,0.71,1.43,2.15,0.62,0.7,2.08,2.65,1.67,0.26,2.01,0.19,1.82,0.51,1.78,3.64,1.1,0.65,0.79,3.43,0.85,0.87,4.17,6.56,2.82,0.53,0.4,3.74,0.11,2.87,0.11,3.07,1.26,0.58,2.77,1.96,1.99,2.68,1.72,1.39,1.21,4.29,0.48,1.46,0.81,1.02,2.13,1.68,1.08,2.48,1.37,0.58,0.28,0.43,2.93,0.97,3.3,1.55,3.57,3.85,0.77,0.96,1.17,2.78,2.27,1.17,1.26,1.68,1.14,0.79,1.38,0.34,0.45,0.47,5.94,0.6,0.93,0.99,0.79,0.82,4.57,3.9,6.88,1.9,1.7,1.52,2.14,1.13,5.18,4.16,1.75,1.1,1.16,4.06,0.97,0.36,0.87,0.24,2.05,1.43,3.78,0.89,1.88,2.64,4.88,2.27,0.26,0.6,3.56,0.23,6.95,1.54,0.64,1.8,1.69,1.41,2.15,1.29,1.51,1.45,2.36,1.5,0.81,1.11,0.81,3.56,4.95,1.69,0.29,2.42,0.36,0.83,1.74,5.57,0.21,2.11,3.46,2.3,0.52,0.24,2.02,2.35,2.94,4.05,1.25,1.76,2.08,4.04,3.55,2.54,1.88,3.15,4.92,2.1,3.79,0.3,0.95,1.27,4.6,1.37,3.58,3.07,2.41,1.75,3.72,5.61,2.26,1.57,1.12,2.41,3.69,1.65,0.64,4.71,2.02,3.27,2.35,1.82,3.34,1.17,4.47,1.44,2.49,0.72,7.09,0.69,1.91,1.4,4.04,1.04,0.68,3.05,0.66,0.48,8.32,6.23,1.42],"xaxis":"x","y":[1.907447486911,1.5576178698978662,1.375812971360757,1.9364996609239518,0.8865607343572313,1.4202853698154405,1.452577692000919,1.2157576115418571,1.9186346213845258,1.1087014842539489,2.4538340067505087,1.751082214275552,1.5850654471729366,1.8681697023877768,1.0440897157736582,1.1395941189380658,1.3999610319472573,2.2835534932189563,1.334525738021913,1.456208694737955,1.3056969701846133,1.315420224961486,1.41500524162946,1.991982293955227,1.1343627966059822,0.8518690760822859,1.0758280581233537,1.5699893316908067,0.890899574077609,1.528186362273908,1.3503247199162194,1.60796929046236,0.457203356819421,1.759542067949009,1.3828587921069109,1.770386181934331,0.9044403497545496,2.106680470685452,1.5858777684393712,1.06271196718216,0.85461761106929,2.3072383626790423,1.9877432824488492,1.1941117961547447,2.2948868640327427,1.1616734895761778,1.3696888973499473,1.4878131333878035,1.3566715495857693,0.1760478292194981,1.8308676690088557,0.8772965166710677,1.1283368693892768,1.0639921511806558,1.9300451545965294,2.6544011801391996,0.9187152358401777,1.8275921307916518,1.2114508178666625,0.5479458789913874,1.03321707881286,0.8332711421370438,0.4030229304529817,1.5030560516683924,2.1657996799957693,1.545840494061644,1.9947718159144208,0.9357731432941696,0.712814620226381,0.8631091737210961,0.8016212912347798,1.5985531480440285,1.3031837499765448,2.092189133726776,1.4842485362980409,1.759542067949009,0.7063712796836675,1.511246747934887,1.3240817324321796,1.4385224986222993,1.462356728891105,0.04299838682786788,2.420387695384077,1.942354150865076,0.9338481288151259,1.546319836168483,2.4688195566886457,0.32752083586350705,0.9629116591671147,2.3663633633246186,2.458927616825732,2.2515366505939025,0.8641033086211886,0.6151814362602644,2.461016773810201,0.6926076945468854,1.8101967035504956,0.9531721603567489,2.2654657664145823,2.1861069628611327,1.349596963349752,1.8936066036864654,1.4429882622228745,1.0219741751072537,2.046281514117866,2.0407959263561404,0.9481465123577574,1.335331206835309,2.1151203583772733,1.6010025282303075,1.8826489935137607,0.9797599761709033,0.5461035262733196,1.9649963222403772,2.1667920181875813,1.2731657850637565,1.7008067210324858,1.132473126679818,1.386517144347855,0.2697779843181538,1.0978799589667114,1.8331971593354075,0.41723959746316236,2.3868391944348364,0.8903019403516531,1.7566936591121243,2.34283780307089,1.0462426631142387,1.1970529666617933,0.9834422591656897,2.058083021881675,1.9700206324897358,1.9199757935362478,0.39216458959717704,1.9421254044965224,0.824919237570148,0.4192114842079253,0.8298546946582647,1.123351738256532,0.8694829958647675,1.4339029676423731,1.9669766748635713,0.3500978359261763,0.9242620384435578,1.7307156938625725,1.0028581778039158,0.7459369461428189,1.9269901518517203,2.2438030992367426,2.300299860692927,0.9863223597176258,0.818228286588665,1.5768343605728428,1.9874861068962653,0.9237061910099998,1.2519164759978667,2.4208583014605534,1.8476524632907214,1.1516081020215192,1.0732509806009958,2.4269629609904735,1.5431617299825848,0.908576450804858,1.3307534342302814,1.0163672738256215,1.1539057067090237,1.1367323291189926,1.3945864288208587,1.119995073621326,1.4620871381587377,2.051470858105202,2.356193917664086,1.9923416870105175,1.1600018343051286,0.9331898622126295,1.4640912895160907,1.594871851288293,2.270146015261258,1.2716269523456498,0.24836825169895443,1.4132124493225326,2.2191709807091518,2.1220812769561865,0.9828986586267167,1.9021585042340854,1.4583239285082326,0.5089081509579036,2.4147735120549143,1.0208296218777642,0.2035932872499932,0.9910833911520356,0.9134784366770093,2.21621265790631,2.4093689295533376,1.5959905174555757,0.8678588637586011,2.3910770229670577,0.78224014593519,0.7009416147017863,0.8014959074780945,1.7313346838039079,0.4613018556289393,2.249579414013296,2.171620866639417,1.4384825415632956,2.108166310725414,1.9127076469310955,0.4610026091689694,0.7536335639413655,2.1268122733963026,2.4031542315977954,2.235820953259072,1.5562298353510702,1.9569664964426785,1.7820968763669682,2.3666787548859025,2.2122278766962116,1.2400604146529481,1.7124910009483347,1.6626058485879665,1.8184273000936233,1.677796114547781,1.5470281902976668,1.1802238762987483,0.40999310713951087,2.3920027147233323,0.84234940839205,1.2472750271645994,1.7955401681867822,1.217509377811945,1.3369795053635154,1.66266298650439,1.8548140638544233,1.2491878103162983,1.0560251086129144,0.59491255143328,2.301903875872542,2.275752884143055,2.073654051751133,0.8865607343572313,2.2417730886256444,1.1395941189380658,2.3511890096146284,0.4750861453430275,1.0249588172223838,2.1320898111307973,1.517233794402773,1.4196402029293165,1.5611940048217714,1.554407283349793,1.6963395988567798,2.5336486438048866,1.1678270474948589,2.1677340809948116,0.9124982931707062,2.0900766748247253,0.9692092209951497,1.087908244223098,1.0832584270345622,0.93012642134807,1.0191218077830477,1.9160764224689193,2.2798479347182825,0.6255318292170943],"yaxis":"y","type":"scatter"},{"line":{"color":"black","dash":"dash"},"mode":"lines","name":"Parity Line","showlegend":false,"x":[0,8],"y":[0,8],"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"band_gap"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"band_gap_predicted"}},"legend":{"tracegroupgap":0},"margin":{"t":60}},                        {"responsive": true}                    ).then(function(){

var gd = document.getElementById('f9bbe89b-70c9-4c9a-bab7-34930069209a');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div></div></div>
</div>
<p>Not too bad! However, there are definitely some outliers (you can hover over the points with your mouse to see what they are).</p>
</section>
<section id="model-interpretation">
<h3>Model interpretation<a class="headerlink" href="#model-interpretation" title="Permalink to this headline">#</a></h3>
<p>An important aspect of machine learning is being able to understand why a model is making certain predictions. Random forest models are particularly amenable to interpretation as they possess a <code class="docutils literal notranslate"><span class="pre">feature_importances</span></code> attribute, which contains the importance of each feature in deciding the final prediction. Let’s look at the feature importances of our model.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">coef_</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([-6.27341584e-02, -4.63499808e-02,  1.63841775e-02, -1.12153851e-01,
        1.23367227e-02, -7.19705928e-02,  2.08316051e-02,  4.30148034e-02,
        2.21831984e-02,  4.30167448e-02,  2.45610912e-02,  8.01359177e-03,
        3.20478164e-02,  2.03481147e-02, -1.16997017e-02,  3.04059620e-02,
        1.04386373e-02,  3.20295507e-02, -6.28552343e-04, -5.21021657e-05,
        5.76450177e-04,  1.90937872e-03, -2.97361263e-03, -1.29110578e-03,
        7.03763182e-02,  9.90859078e-02,  2.87095897e-02, -1.23914834e-02,
       -2.67060510e-02, -3.78203723e-02,  8.28276687e-03,  2.14763620e-02,
        1.31935951e-02, -3.38629432e-02,  2.38003951e-03, -5.46662214e-02,
        6.88696874e-03,  2.42322668e-03, -4.46374206e-03, -2.54799806e-02,
        3.46070312e-02,  6.95147259e-03, -1.56315344e-02, -1.85560950e-02,
       -2.92456059e-03, -4.06266551e-03,  5.48985088e-02,  3.12288102e-02,
        1.08842376e-01,  0.00000000e+00, -1.08842376e-01,  1.47711103e-02,
       -2.26088015e-02,  4.85217483e-02,  1.00238028e-01,  6.52086810e-02,
       -3.50293469e-02,  8.07235272e-02, -5.23254665e-02,  6.77748627e-03,
        9.46887658e-02,  5.42395348e-02, -4.04492310e-02, -1.18444669e-01,
        1.99708718e-01,  8.82938772e-02,  0.00000000e+00,  4.63866346e-02,
        4.63866346e-02, -2.60670628e-02, -1.38570292e-02,  0.00000000e+00,
       -1.14564077e-01, -1.01271137e-01,  1.32929393e-02, -4.90170943e-02,
        2.93360486e-02, -2.64556589e-02,  0.00000000e+00, -3.00428226e-02,
       -3.00428226e-02, -1.40367323e-02, -3.42398282e-03, -7.78465925e-03,
        1.51290270e-02,  8.89477405e-02,  7.38187136e-02,  3.08664316e-03,
       -8.70252551e-02, -7.74362319e-02,  0.00000000e+00,  4.05788018e-02,
        4.05788018e-02,  1.89633568e-02, -6.49670794e-03,  0.00000000e+00,
        0.00000000e+00,  0.00000000e+00,  0.00000000e+00,  0.00000000e+00,
        0.00000000e+00,  0.00000000e+00,  2.64976661e-03, -2.87239933e-02,
       -3.13737599e-02,  8.01326771e-03, -1.58844183e-01,  9.37528328e-02,
       -1.40123728e-03, -5.91932121e-03, -4.51808394e-03,  4.74708739e-02,
       -2.06635646e-02, -1.78043686e-02,  1.26572199e-02,  3.43539918e-04,
       -1.23136799e-02, -7.29584689e-02,  2.85678832e-02, -9.23575551e-02,
        0.00000000e+00, -2.96916553e-02, -2.96916553e-02,  3.28993420e-03,
        9.86222145e-04,  0.00000000e+00, -1.63572252e-03,  1.17307770e-03,
        2.80880021e-03,  1.72383644e-03, -2.02930372e-04,  8.05592392e-03,
       -1.12660225e-01,  1.32312547e-02,  1.99530257e-02])
</pre></div>
</div>
</div>
</div>
<p>To make sense of this, we need to know which feature each number corresponds to. We can use <code class="docutils literal notranslate"><span class="pre">PlotlyFig</span></code> to plot the importances of the 5 most important features.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">coefficients</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">coef_</span><span class="p">)</span>
<span class="n">included</span> <span class="o">=</span> <span class="n">X_train</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span>
<span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">coefficients</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="n">fig_bar</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">included</span><span class="p">[</span><span class="n">indices</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">],</span>
    <span class="n">y</span><span class="o">=</span><span class="n">coefficients</span><span class="p">[</span><span class="n">indices</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">],</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Linear Coefficients in Ridge Regression&quot;</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="s2">&quot;Importance&quot;</span><span class="p">},</span>
<span class="p">)</span>
<span class="n">fig_bar</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>                            <div id="7f2fe5f7-408a-40f4-8018-a7be71fcefcd" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("7f2fe5f7-408a-40f4-8018-a7be71fcefcd")) {                    Plotly.newPlot(                        "7f2fe5f7-408a-40f4-8018-a7be71fcefcd",                        [{"alignmentgroup":"True","hovertemplate":"Feature=%{x}<br>Importance=%{y}<extra></extra>","legendgroup":"","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"","offsetgroup":"","orientation":"v","showlegend":false,"textposition":"auto","x":["MagpieData avg_dev NdValence","MagpieData avg_dev NUnfilled","MagpieData mean NdValence","MagpieData minimum NValence","density"],"xaxis":"x","y":[0.19970871760687664,0.1588441834184316,0.11844466902469541,0.1145640766894438,0.11266022528730475],"yaxis":"y","type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Feature"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Importance"}},"legend":{"tracegroupgap":0},"title":{"text":"Linear Coefficients in Ridge Regression"},"barmode":"relative"},                        {"responsive": true}                    ).then(function(){

var gd = document.getElementById('7f2fe5f7-408a-40f4-8018-a7be71fcefcd');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div></div></div>
</div>
</section>
</section>
<section id="bonus-curated-ml-datasets-with-matbench">
<h2>Bonus: Curated ML datasets with Matbench<a class="headerlink" href="#bonus-curated-ml-datasets-with-matbench" title="Permalink to this headline">#</a></h2>
<p>If you are interested in comparing your machine learning algorithms with the state of the art, matminer also offers access to a curated set of 13 benchmarking datasets called Matbench, which have been used to benchmark SoTA algorithms like RooSt, CGCNN, CRABNet, MEGNet, Automatminer, and more.</p>
<p>The Matbench datasets span a wide variety of materials informatics tasks such as:</p>
<ul class="simple">
<li><p>Predicting materials properties given <strong>only composition</strong>, or given <strong>composition <em>and</em> structure</strong></p></li>
<li><p>Predicting a <strong>wide array of target properties</strong>, such as elastic constants, dielectric constants, formation energies, and steel yield strength</p></li>
<li><p><strong>Data-sparse</strong> tasks (300 samples) and (relatively) <strong>data-rich</strong> tasks (100k+ samples)</p></li>
<li><p>Both regression and classification tasks</p></li>
</ul>
<p>The full set of datasets is given in the table below:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Task name</p></th>
<th class="head"><p>Task type</p></th>
<th class="head"><p>Target column (unit)</p></th>
<th class="head"><p>Input type</p></th>
<th class="head"><p>Samples</p></th>
<th class="head"><p>MAD (regression) or Fraction True (classification)</p></th>
<th class="head"><p>Links</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">matbench_steels</span></code></p></td>
<td><p>regression</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">strength</span></code> (MPa)</p></td>
<td><p>composition</p></td>
<td><p>312</p></td>
<td><p>229.3743</p></td>
<td><p><a class="reference external" href="https://ml.materialsproject.org/projects/matbench_steels.json.gz">download</a>, <a class="reference external" href="https://ml.materialsproject.org/projects/matbench_steels">interactive</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">matbench_jdft2d</span></code></p></td>
<td><p>regression</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">exfoliation_en</span></code> (meV/atom)</p></td>
<td><p>structure</p></td>
<td><p>636</p></td>
<td><p>67.2020</p></td>
<td><p><a class="reference external" href="https://ml.materialsproject.org/projects/matbench_jdft2d.json.gz">download</a>, <a class="reference external" href="https://ml.materialsproject.org/projects/matbench_jdft2d">interactive</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">matbench_phonons</span></code></p></td>
<td><p>regression</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">last</span> <span class="pre">phdos</span> <span class="pre">peak</span></code> (cm^-1)</p></td>
<td><p>structure</p></td>
<td><p>1,265</p></td>
<td><p>323.7870</p></td>
<td><p><a class="reference external" href="https://ml.materialsproject.org/projects/matbench_phonons.json.gz">download</a>, <a class="reference external" href="https://ml.materialsproject.org/projects/matbench_phonons">interactive</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">matbench_expt_gap</span></code></p></td>
<td><p>regression</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">gap</span> <span class="pre">expt</span></code> (eV)</p></td>
<td><p>composition</p></td>
<td><p>4,604</p></td>
<td><p>1.1432</p></td>
<td><p><a class="reference external" href="https://ml.materialsproject.org/projects/matbench_expt_gap.json.gz">download</a>, <a class="reference external" href="https://ml.materialsproject.org/projects/matbench_expt_gap">interactive</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">matbench_dielectric</span></code></p></td>
<td><p>regression</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">n</span></code> (unitless)</p></td>
<td><p>structure</p></td>
<td><p>4,764</p></td>
<td><p>0.8085</p></td>
<td><p><a class="reference external" href="https://ml.materialsproject.org/projects/matbench_dielectric.json.gz">download</a>, <a class="reference external" href="https://ml.materialsproject.org/projects/matbench_dielectric">interactive</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">matbench_expt_is_metal</span></code></p></td>
<td><p>classification</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">is_metal</span></code></p></td>
<td><p>composition</p></td>
<td><p>4,921</p></td>
<td><p>0.4981</p></td>
<td><p><a class="reference external" href="https://ml.materialsproject.org/projects/matbench_expt_is_metal.json.gz">download</a>, <a class="reference external" href="https://ml.materialsproject.org/projects/matbench_expt_is_metal">interactive</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">matbench_glass</span></code></p></td>
<td><p>classification</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">gfa</span></code></p></td>
<td><p>composition</p></td>
<td><p>5,680</p></td>
<td><p>0.7104</p></td>
<td><p><a class="reference external" href="https://ml.materialsproject.org/projects/matbench_glass.json.gz">download</a>, <a class="reference external" href="https://ml.materialsproject.org/projects/matbench_glass">interactive</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">matbench_log_gvrh</span></code></p></td>
<td><p>regression</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">log10(G_VRH)</span></code> (log10(GPa))</p></td>
<td><p>structure</p></td>
<td><p>10,987</p></td>
<td><p>0.2931</p></td>
<td><p><a class="reference external" href="https://ml.materialsproject.org/projects/matbench_log_gvrh.json.gz">download</a>, <a class="reference external" href="https://ml.materialsproject.org/projects/matbench_log_gvrh">interactive</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">matbench_log_kvrh</span></code></p></td>
<td><p>regression</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">log10(K_VRH)</span></code> (log10(GPa))</p></td>
<td><p>structure</p></td>
<td><p>10,987</p></td>
<td><p>0.2897</p></td>
<td><p><a class="reference external" href="https://ml.materialsproject.org/projects/matbench_log_kvrh.json.gz">download</a>, <a class="reference external" href="https://ml.materialsproject.org/projects/matbench_log_kvrh">interactive</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">matbench_perovskites</span></code></p></td>
<td><p>regression</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">e_form</span></code> (eV/unit cell)</p></td>
<td><p>structure</p></td>
<td><p>18,928</p></td>
<td><p>0.5660</p></td>
<td><p><a class="reference external" href="https://ml.materialsproject.org/projects/matbench_perovskites.json.gz">download</a>, <a class="reference external" href="https://ml.materialsproject.org/projects/matbench_perovskites">interactive</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">matbench_mp_gap</span></code></p></td>
<td><p>regression</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">gap</span> <span class="pre">pbe</span></code> (eV)</p></td>
<td><p>structure</p></td>
<td><p>106,113</p></td>
<td><p>1.3271</p></td>
<td><p><a class="reference external" href="https://ml.materialsproject.org/projects/matbench_mp_gap.json.gz">download</a>, <a class="reference external" href="https://ml.materialsproject.org/projects/matbench_mp_gap">interactive</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">matbench_mp_is_metal</span></code></p></td>
<td><p>classification</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">is_metal</span></code></p></td>
<td><p>structure</p></td>
<td><p>106,113</p></td>
<td><p>0.4349</p></td>
<td><p><a class="reference external" href="https://ml.materialsproject.org/projects/matbench_mp_is_metal.json.gz">download</a>, <a class="reference external" href="https://ml.materialsproject.org/projects/matbench_mp_is_metal">interactive</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">matbench_mp_e_form</span></code></p></td>
<td><p>regression</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">e_form</span></code> (eV/atom)</p></td>
<td><p>structure</p></td>
<td><p>132,752</p></td>
<td><p>1.0059</p></td>
<td><p><a class="reference external" href="https://ml.materialsproject.org/projects/matbench_mp_e_form.json.gz">download</a>, <a class="reference external" href="https://ml.materialsproject.org/projects/matbench_mp_e_form">interactive</a></p></td>
</tr>
</tbody>
</table>
<section id="the-matbench-leaderboard-and-benchmarking-code">
<h3>The Matbench Leaderboard and Benchmarking Code<a class="headerlink" href="#the-matbench-leaderboard-and-benchmarking-code" title="Permalink to this headline">#</a></h3>
<p>We host an online benchmark leaderboard - similar to an “ImageNet” for materials science - at the following URL:</p>
</section>
<section id="https-hackingmaterials-lbl-gov-matbench">
<h3><a class="reference external" href="https://hackingmaterials.lbl.gov/matbench">https://hackingmaterials.lbl.gov/matbench</a><a class="headerlink" href="#https-hackingmaterials-lbl-gov-matbench" title="Permalink to this headline">#</a></h3>
<p>Which contains comprehensive data on various SoTA algorithm’s performance across tasks in Matbench. On the website you can find:</p>
<ul class="simple">
<li><p><strong>A general purpose leaderboard comparing only the most-widely applicable algorithms</strong></p></li>
<li><p><strong>Individual per-task (per-dataset) leaderboards for comparing any ML model on a particular task</strong></p></li>
<li><p>Comprehensive breakdowns of cross-validation performance, statistics, and metadata for every model</p></li>
<li><p><strong>Access to individual sample predictions for each and every submission</strong></p></li>
</ul>
<p><img alt="website_mb" src="../_images/website_mb.png" /></p>
</section>
<section id="general-purpose-leaderboard">
<h3>General purpose leaderboard<a class="headerlink" href="#general-purpose-leaderboard" title="Permalink to this headline">#</a></h3>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Task name</p></th>
<th class="head"><p>Samples</p></th>
<th class="head"><p>Algorithm</p></th>
<th class="head"><p>Verified MAE (unit) or ROCAUC</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>matbench_steels</p></td>
<td><p>312</p></td>
<td><p><a class="reference external" href="https://hackingmaterials.github.io/matbench/Full%20Benchmark%20Data/matbench_v0.1_automatminer_expressv2020">AMMExpress v2020</a></p></td>
<td><p><strong>97.4929 (MPa)</strong></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>matbench_jdft2d</p></td>
<td><p>636</p></td>
<td><p><a class="reference external" href="https://hackingmaterials.github.io/matbench/Full%20Benchmark%20Data/matbench_v0.1_automatminer_expressv2020">AMMExpress v2020</a></p></td>
<td><p><strong>39.8497 (meV/atom)</strong></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>matbench_phonons</p></td>
<td><p>1,265</p></td>
<td><p><a class="reference external" href="https://hackingmaterials.github.io/matbench/Full%20Benchmark%20Data/matbench_v0.1_CrabNet">CrabNet</a></p></td>
<td><p><strong>55.1114 (cm^-1)</strong></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>matbench_expt_gap</p></td>
<td><p>4,604</p></td>
<td><p><a class="reference external" href="https://hackingmaterials.github.io/matbench/Full%20Benchmark%20Data/matbench_v0.1_CrabNet">CrabNet</a></p></td>
<td><p><strong>0.3463 (eV)</strong></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>matbench_dielectric</p></td>
<td><p>4,764</p></td>
<td><p><a class="reference external" href="https://hackingmaterials.github.io/matbench/Full%20Benchmark%20Data/matbench_v0.1_automatminer_expressv2020">AMMExpress v2020</a></p></td>
<td><p><strong>0.3150 (unitless)</strong></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>matbench_expt_is_metal</p></td>
<td><p>4,921</p></td>
<td><p><a class="reference external" href="https://hackingmaterials.github.io/matbench/Full%20Benchmark%20Data/matbench_v0.1_automatminer_expressv2020">AMMExpress v2020</a></p></td>
<td><p><strong>0.9209</strong></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>matbench_glass</p></td>
<td><p>5,680</p></td>
<td><p><a class="reference external" href="https://hackingmaterials.github.io/matbench/Full%20Benchmark%20Data/matbench_v0.1_automatminer_expressv2020">AMMExpress v2020</a></p></td>
<td><p><strong>0.8607</strong></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>matbench_log_gvrh</p></td>
<td><p>10,987</p></td>
<td><p><a class="reference external" href="https://hackingmaterials.github.io/matbench/Full%20Benchmark%20Data/matbench_v0.1_automatminer_expressv2020">AMMExpress v2020</a></p></td>
<td><p><strong>0.0874 (log10(GPa))</strong></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>matbench_log_kvrh</p></td>
<td><p>10,987</p></td>
<td><p><a class="reference external" href="https://hackingmaterials.github.io/matbench/Full%20Benchmark%20Data/matbench_v0.1_automatminer_expressv2020">AMMExpress v2020</a></p></td>
<td><p><strong>0.0647 (log10(GPa))</strong></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>matbench_perovskites</p></td>
<td><p>18,928</p></td>
<td><p><a class="reference external" href="https://hackingmaterials.github.io/matbench/Full%20Benchmark%20Data/matbench_v0.1_cgcnnv2019">CGCNN v2019</a></p></td>
<td><p><strong>0.0452 (eV/unit cell)</strong></p></td>
<td><p>structure required</p></td>
</tr>
<tr class="row-even"><td><p>matbench_mp_gap</p></td>
<td><p>106,113</p></td>
<td><p><a class="reference external" href="https://hackingmaterials.github.io/matbench/Full%20Benchmark%20Data/matbench_v0.1_CrabNet">CrabNet</a></p></td>
<td><p><strong>0.2655 (eV)</strong></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>matbench_mp_is_metal</p></td>
<td><p>106,113</p></td>
<td><p><a class="reference external" href="https://hackingmaterials.github.io/matbench/Full%20Benchmark%20Data/matbench_v0.1_cgcnnv2019">CGCNN v2019</a></p></td>
<td><p><strong>0.9520</strong></p></td>
<td><p>structure required</p></td>
</tr>
<tr class="row-even"><td><p>matbench_mp_e_form</p></td>
<td><p>132,752</p></td>
<td><p><a class="reference external" href="https://hackingmaterials.github.io/matbench/Full%20Benchmark%20Data/matbench_v0.1_cgcnnv2019">CGCNN v2019</a></p></td>
<td><p><strong>0.0337 (eV/atom)</strong></p></td>
<td><p>structure required</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notes"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="nonparametric.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Non-parametric models</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="neural_networks.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Neural Networks</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Zachary Ulissi<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>